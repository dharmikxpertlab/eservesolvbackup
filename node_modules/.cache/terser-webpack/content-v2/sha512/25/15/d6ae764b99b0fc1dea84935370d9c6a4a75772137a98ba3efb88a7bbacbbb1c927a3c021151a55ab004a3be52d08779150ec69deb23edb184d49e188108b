{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{\"99Un\":function(t,r,e){\"use strict\";e.r(r),e.d(r,\"HomePageModule\",function(){return y});var o=e(\"tyNb\"),n=e(\"mrSG\"),i=e(\"fXoL\"),s=e(\"yFW5\"),a=e(\"roZI\"),c=e(\"qSrz\"),u=e(\"IYfF\");let l=(()=>{class t{constructor(t,r,e){this.ngxPermissionsService=t,this.authService=r,this.router=e}canActivate(t,r){return(()=>Object(n.a)(this,void 0,void 0,function*(){yield this.authService.assignPermissions();const t=yield this.ngxPermissionsService.getPermissions();return Object.keys(t).indexOf(a.e.Customer)>-1?(this.router.navigate([\"/customers/dashboard\"]),!1):!(Object.keys(t).indexOf(a.e.SpEmployee)>-1&&(this.router.navigate([\"/technicians/dashboard\"]),1))}))()}}return t.\\u0275fac=function(r){return new(r||t)(i.Xb(c.c),i.Xb(u.a),i.Xb(o.g))},t.\\u0275prov=i.Jb({token:t,factory:t.\\u0275fac,providedIn:\"root\"}),t})(),b=(()=>{class t{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return(()=>Object(n.a)(this,void 0,void 0,function*(){return!!(yield this.authService.getUserInfo()).net_approval||(yield this.authService.logout(),yield this.router.navigate([\"/auth\",\"register\",\"awaiting-approval\"],{queryParams:{navigateTo:r.url}}),!1)}))()}}return t.\\u0275fac=function(r){return new(r||t)(i.Xb(u.a),i.Xb(o.g))},t.\\u0275prov=i.Jb({token:t,factory:t.\\u0275fac,providedIn:\"root\"}),t})(),d=(()=>{class t{constructor(t,r,e){this.authGuard=t,this.roleGuard=r,this.approvalGuard=e}canActivate(t,r){return Object(n.a)(this,void 0,void 0,function*(){for(const e of this.getOrderedGuards())if(!1===(yield e.canActivate(t,r)))return!1;return!0})}getOrderedGuards(){return[this.authGuard,this.roleGuard,this.approvalGuard]}}return t.\\u0275fac=function(r){return new(r||t)(i.Xb(s.a),i.Xb(l),i.Xb(b))},t.\\u0275prov=i.Jb({token:t,factory:t.\\u0275fac,providedIn:\"root\"}),t})();var p=e(\"TEn/\"),h=e(\"qO5g\"),f=e(\"sYmb\");const v=[{path:\"\",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\\u0275fac=function(r){return new(r||t)},t.\\u0275cmp=i.Hb({type:t,selectors:[[\"app-home\"]],decls:5,vars:3,consts:[[3,\"title\"]],template:function(t,r){1&t&&(i.Tb(0,\"ion-header\"),i.Tb(1,\"app-primary-header\",0),i.fc(2,\"translate\"),i.Ob(3,\"ion-back-button\"),i.Sb(),i.Sb(),i.Ob(4,\"ion-content\")),2&t&&(i.Cb(1),i.lc(\"title\",i.gc(2,1,\"Home\")))},directives:[p.s,h.a,p.f,p.g,p.p],pipes:[f.c],styles:[\"\"]}),t})(),canActivate:[d]}];let m=(()=>{class t{}return t.\\u0275fac=function(r){return new(r||t)},t.\\u0275mod=i.Lb({type:t}),t.\\u0275inj=i.Kb({imports:[[o.j.forChild(v)],o.j]}),t})();var g=e(\"PCNd\");let y=(()=>{class t{}return t.\\u0275fac=function(r){return new(r||t)},t.\\u0275mod=i.Lb({type:t}),t.\\u0275inj=i.Kb({imports:[[g.a,m,c.b.forChild()]]}),t})()},qO5g:function(t,r,e){\"use strict\";e.d(r,\"a\",function(){return a});var o=e(\"fXoL\"),n=e(\"TEn/\"),i=e(\"sYmb\");const s=[\"*\"];let a=(()=>{class t{constructor(){this.toolbarColor=\"primary\",this.menuButtonColor=\"light\"}ngOnInit(){}}return t.\\u0275fac=function(r){return new(r||t)},t.\\u0275cmp=o.Hb({type:t,selectors:[[\"app-primary-header\"]],inputs:{title:\"title\",toolbarColor:\"toolbarColor\",menuButtonColor:\"menuButtonColor\"},ngContentSelectors:s,decls:8,vars:5,consts:[[3,\"color\"],[\"slot\",\"start\"],[\"slot\",\"end\"],[\"auto-hide\",\"false\",3,\"color\"]],template:function(t,r){1&t&&(o.kc(),o.Tb(0,\"ion-toolbar\",0),o.Tb(1,\"ion-buttons\",1),o.jc(2),o.Sb(),o.Tb(3,\"ion-buttons\",2),o.Ob(4,\"ion-menu-button\",3),o.Sb(),o.Tb(5,\"ion-title\"),o.Bc(6),o.fc(7,\"translate\"),o.Sb(),o.Sb()),2&t&&(o.lc(\"color\",r.toolbarColor),o.Cb(4),o.lc(\"color\",r.menuButtonColor),o.Cb(2),o.Cc(o.gc(7,3,r.title)))},directives:[n.O,n.j,n.A,n.M],pipes:[i.c],styles:[\"\"]}),t})()}}]);","name":"37.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[37],{\n\n/***/ \"99Un\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"HomePageModule\", function() { return /* binding */ home_module_HomePageModule; });\n\n// EXTERNAL MODULE: ./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js + 7 modules\nvar router = __webpack_require__(\"tyNb\");\n\n// EXTERNAL MODULE: ./node_modules/tslib/tslib.es6.js\nvar tslib_es6 = __webpack_require__(\"mrSG\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js\nvar core = __webpack_require__(\"fXoL\");\n\n// EXTERNAL MODULE: ./src/app/pages/auth/auth.guard.ts\nvar auth_guard = __webpack_require__(\"yFW5\");\n\n// EXTERNAL MODULE: ./src/api/models.ts + 8 modules\nvar models = __webpack_require__(\"roZI\");\n\n// EXTERNAL MODULE: ./node_modules/ngx-permissions/__ivy_ngcc__/fesm2015/ngx-permissions.js + 2 modules\nvar ngx_permissions = __webpack_require__(\"qSrz\");\n\n// EXTERNAL MODULE: ./src/app/shared/services/auth.service.ts\nvar auth_service = __webpack_require__(\"IYfF\");\n\n// CONCATENATED MODULE: ./src/app/pages/auth/role.guard.ts\n\n\n\n\n\n\nlet role_guard_RoleGuard = /*@__PURE__*/ (() => {\n    class RoleGuard {\n        constructor(ngxPermissionsService, authService, router) {\n            this.ngxPermissionsService = ngxPermissionsService;\n            this.authService = authService;\n            this.router = router;\n        }\n        canActivate(route, state) {\n            return (() => Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                yield this.authService.assignPermissions();\n                const permissions = yield this.ngxPermissionsService.getPermissions();\n                if (Object.keys(permissions).indexOf(models[\"e\" /* RolesEnum */].Customer) > -1) {\n                    this.router.navigate(['/customers/dashboard']);\n                    return false;\n                }\n                if (Object.keys(permissions).indexOf(models[\"e\" /* RolesEnum */].SpEmployee) > -1) {\n                    this.router.navigate(['/technicians/dashboard']);\n                    return false;\n                }\n                return true;\n            }))();\n        }\n    }\n    RoleGuard.ɵfac = function RoleGuard_Factory(t) { return new (t || RoleGuard)(core[\"Xb\" /* ɵɵinject */](ngx_permissions[\"c\" /* NgxPermissionsService */]), core[\"Xb\" /* ɵɵinject */](auth_service[\"a\" /* AuthService */]), core[\"Xb\" /* ɵɵinject */](router[\"g\" /* Router */])); };\n    RoleGuard.ɵprov = core[\"Jb\" /* ɵɵdefineInjectable */]({ token: RoleGuard, factory: RoleGuard.ɵfac, providedIn: 'root' });\n    return RoleGuard;\n})();\n\n// CONCATENATED MODULE: ./src/app/pages/auth/approval.guard.ts\n\n\n\n\nlet approval_guard_ApprovalGuard = /*@__PURE__*/ (() => {\n    class ApprovalGuard {\n        constructor(authService, router) {\n            this.authService = authService;\n            this.router = router;\n        }\n        canActivate(route, state) {\n            return (() => Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                const user = yield this.authService.getUserInfo();\n                if (!user.net_approval) {\n                    yield this.authService.logout();\n                    yield this.router.navigate(['/auth', 'register', 'awaiting-approval'], {\n                        queryParams: {\n                            navigateTo: state.url\n                        }\n                    });\n                    return false;\n                }\n                return true;\n            }))();\n        }\n    }\n    ApprovalGuard.ɵfac = function ApprovalGuard_Factory(t) { return new (t || ApprovalGuard)(core[\"Xb\" /* ɵɵinject */](auth_service[\"a\" /* AuthService */]), core[\"Xb\" /* ɵɵinject */](router[\"g\" /* Router */])); };\n    ApprovalGuard.ɵprov = core[\"Jb\" /* ɵɵdefineInjectable */]({ token: ApprovalGuard, factory: ApprovalGuard.ɵfac, providedIn: 'root' });\n    return ApprovalGuard;\n})();\n\n// CONCATENATED MODULE: ./src/app/pages/auth/home.guard.ts\n\n\n\n\n\nlet home_guard_HomeGuard = /*@__PURE__*/ (() => {\n    class HomeGuard {\n        constructor(authGuard, roleGuard, approvalGuard) {\n            this.authGuard = authGuard;\n            this.roleGuard = roleGuard;\n            this.approvalGuard = approvalGuard;\n        }\n        canActivate(next, state) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                for (const guard of this.getOrderedGuards()) {\n                    if ((yield guard.canActivate(next, state)) === false) {\n                        return false;\n                    }\n                }\n                return true;\n            });\n        }\n        getOrderedGuards() {\n            return [\n                this.authGuard,\n                this.roleGuard,\n                this.approvalGuard\n            ];\n        }\n    }\n    HomeGuard.ɵfac = function HomeGuard_Factory(t) { return new (t || HomeGuard)(core[\"Xb\" /* ɵɵinject */](auth_guard[\"a\" /* AuthGuard */]), core[\"Xb\" /* ɵɵinject */](role_guard_RoleGuard), core[\"Xb\" /* ɵɵinject */](approval_guard_ApprovalGuard)); };\n    HomeGuard.ɵprov = core[\"Jb\" /* ɵɵdefineInjectable */]({ token: HomeGuard, factory: HomeGuard.ɵfac, providedIn: 'root' });\n    return HomeGuard;\n})();\n\n// EXTERNAL MODULE: ./node_modules/@ionic/angular/__ivy_ngcc__/fesm2015/ionic-angular.js + 6 modules\nvar ionic_angular = __webpack_require__(\"TEn/\");\n\n// EXTERNAL MODULE: ./src/app/shared/components/header/primary-header/primary-header.component.ts\nvar primary_header_component = __webpack_require__(\"qO5g\");\n\n// EXTERNAL MODULE: ./node_modules/@ngx-translate/core/__ivy_ngcc__/fesm2015/ngx-translate-core.js\nvar ngx_translate_core = __webpack_require__(\"sYmb\");\n\n// CONCATENATED MODULE: ./src/app/pages/home/home.page.ts\n\n\n\n\nlet home_page_HomePage = /*@__PURE__*/ (() => {\n    class HomePage {\n        constructor() { }\n        ngOnInit() {\n        }\n    }\n    HomePage.ɵfac = function HomePage_Factory(t) { return new (t || HomePage)(); };\n    HomePage.ɵcmp = core[\"Hb\" /* ɵɵdefineComponent */]({ type: HomePage, selectors: [[\"app-home\"]], decls: 5, vars: 3, consts: [[3, \"title\"]], template: function HomePage_Template(rf, ctx) {\n            if (rf & 1) {\n                core[\"Tb\" /* ɵɵelementStart */](0, \"ion-header\");\n                core[\"Tb\" /* ɵɵelementStart */](1, \"app-primary-header\", 0);\n                core[\"fc\" /* ɵɵpipe */](2, \"translate\");\n                core[\"Ob\" /* ɵɵelement */](3, \"ion-back-button\");\n                core[\"Sb\" /* ɵɵelementEnd */]();\n                core[\"Sb\" /* ɵɵelementEnd */]();\n                core[\"Ob\" /* ɵɵelement */](4, \"ion-content\");\n            }\n            if (rf & 2) {\n                core[\"Cb\" /* ɵɵadvance */](1);\n                core[\"lc\" /* ɵɵproperty */](\"title\", core[\"gc\" /* ɵɵpipeBind1 */](2, 1, \"Home\"));\n            }\n        }, directives: [ionic_angular[\"s\" /* IonHeader */], primary_header_component[\"a\" /* PrimaryHeaderComponent */], ionic_angular[\"f\" /* IonBackButton */], ionic_angular[\"g\" /* IonBackButtonDelegate */], ionic_angular[\"p\" /* IonContent */]], pipes: [ngx_translate_core[\"c\" /* TranslatePipe */]], styles: [\"\"] });\n    return HomePage;\n})();\n\n// CONCATENATED MODULE: ./src/app/pages/home/home-routing.module.ts\n\n\n\n\n\nconst routes = [\n    {\n        path: '',\n        component: home_page_HomePage,\n        canActivate: [home_guard_HomeGuard]\n    }\n];\nlet home_routing_module_HomePageRoutingModule = /*@__PURE__*/ (() => {\n    class HomePageRoutingModule {\n    }\n    HomePageRoutingModule.ɵfac = function HomePageRoutingModule_Factory(t) { return new (t || HomePageRoutingModule)(); };\n    HomePageRoutingModule.ɵmod = core[\"Lb\" /* ɵɵdefineNgModule */]({ type: HomePageRoutingModule });\n    HomePageRoutingModule.ɵinj = core[\"Kb\" /* ɵɵdefineInjector */]({ imports: [[router[\"j\" /* RouterModule */].forChild(routes)], router[\"j\" /* RouterModule */]] });\n    return HomePageRoutingModule;\n})();\n\n// EXTERNAL MODULE: ./src/app/shared/shared.module.ts + 5 modules\nvar shared_module = __webpack_require__(\"PCNd\");\n\n// CONCATENATED MODULE: ./src/app/pages/home/home.module.ts\n\n\n\n\n\nlet home_module_HomePageModule = /*@__PURE__*/ (() => {\n    class HomePageModule {\n    }\n    HomePageModule.ɵfac = function HomePageModule_Factory(t) { return new (t || HomePageModule)(); };\n    HomePageModule.ɵmod = core[\"Lb\" /* ɵɵdefineNgModule */]({ type: HomePageModule });\n    HomePageModule.ɵinj = core[\"Kb\" /* ɵɵdefineInjector */]({ imports: [[\n                shared_module[\"a\" /* SharedModule */],\n                home_routing_module_HomePageRoutingModule,\n                ngx_permissions[\"b\" /* NgxPermissionsModule */].forChild()\n            ]] });\n    return HomePageModule;\n})();\n\n\n/***/ }),\n\n/***/ \"qO5g\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return PrimaryHeaderComponent; });\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"fXoL\");\n/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"TEn/\");\n/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"sYmb\");\n\n\n\nconst _c0 = [\"*\"];\nlet PrimaryHeaderComponent = /*@__PURE__*/ (() => {\n    class PrimaryHeaderComponent {\n        constructor() {\n            this.toolbarColor = 'primary';\n            this.menuButtonColor = 'light';\n        }\n        ngOnInit() { }\n    }\n    PrimaryHeaderComponent.ɵfac = function PrimaryHeaderComponent_Factory(t) { return new (t || PrimaryHeaderComponent)(); };\n    PrimaryHeaderComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__[/* ɵɵdefineComponent */ \"Hb\"]({ type: PrimaryHeaderComponent, selectors: [[\"app-primary-header\"]], inputs: { title: \"title\", toolbarColor: \"toolbarColor\", menuButtonColor: \"menuButtonColor\" }, ngContentSelectors: _c0, decls: 8, vars: 5, consts: [[3, \"color\"], [\"slot\", \"start\"], [\"slot\", \"end\"], [\"auto-hide\", \"false\", 3, \"color\"]], template: function PrimaryHeaderComponent_Template(rf, ctx) {\n            if (rf & 1) {\n                _angular_core__WEBPACK_IMPORTED_MODULE_0__[/* ɵɵprojectionDef */ \"kc\"]();\n                _angular_core__WEBPACK_IMPORTED_MODULE_0__[/* ɵɵelementStart */ \"Tb\"](0, \"ion-toolbar\", 0);\n                _angular_core__WEBPACK_IMPORTED_MODULE_0__[/* ɵɵelementStart */ \"Tb\"](1, \"ion-buttons\", 1);\n                _angular_core__WEBPACK_IMPORTED_MODULE_0__[/* ɵɵprojection */ \"jc\"](2);\n                _angular_core__WEBPACK_IMPORTED_MODULE_0__[/* ɵɵelementEnd */ \"Sb\"]();\n                _angular_core__WEBPACK_IMPORTED_MODULE_0__[/* ɵɵelementStart */ \"Tb\"](3, \"ion-buttons\", 2);\n                _angular_core__WEBPACK_IMPORTED_MODULE_0__[/* ɵɵelement */ \"Ob\"](4, \"ion-menu-button\", 3);\n                _angular_core__WEBPACK_IMPORTED_MODULE_0__[/* ɵɵelementEnd */ \"Sb\"]();\n                _angular_core__WEBPACK_IMPORTED_MODULE_0__[/* ɵɵelementStart */ \"Tb\"](5, \"ion-title\");\n                _angular_core__WEBPACK_IMPORTED_MODULE_0__[/* ɵɵtext */ \"Bc\"](6);\n                _angular_core__WEBPACK_IMPORTED_MODULE_0__[/* ɵɵpipe */ \"fc\"](7, \"translate\");\n                _angular_core__WEBPACK_IMPORTED_MODULE_0__[/* ɵɵelementEnd */ \"Sb\"]();\n                _angular_core__WEBPACK_IMPORTED_MODULE_0__[/* ɵɵelementEnd */ \"Sb\"]();\n            }\n            if (rf & 2) {\n                _angular_core__WEBPACK_IMPORTED_MODULE_0__[/* ɵɵproperty */ \"lc\"](\"color\", ctx.toolbarColor);\n                _angular_core__WEBPACK_IMPORTED_MODULE_0__[/* ɵɵadvance */ \"Cb\"](4);\n                _angular_core__WEBPACK_IMPORTED_MODULE_0__[/* ɵɵproperty */ \"lc\"](\"color\", ctx.menuButtonColor);\n                _angular_core__WEBPACK_IMPORTED_MODULE_0__[/* ɵɵadvance */ \"Cb\"](2);\n                _angular_core__WEBPACK_IMPORTED_MODULE_0__[/* ɵɵtextInterpolate */ \"Cc\"](_angular_core__WEBPACK_IMPORTED_MODULE_0__[/* ɵɵpipeBind1 */ \"gc\"](7, 3, ctx.title));\n            }\n        }, directives: [_ionic_angular__WEBPACK_IMPORTED_MODULE_1__[/* IonToolbar */ \"O\"], _ionic_angular__WEBPACK_IMPORTED_MODULE_1__[/* IonButtons */ \"j\"], _ionic_angular__WEBPACK_IMPORTED_MODULE_1__[/* IonMenuButton */ \"A\"], _ionic_angular__WEBPACK_IMPORTED_MODULE_1__[/* IonTitle */ \"M\"]], pipes: [_ngx_translate_core__WEBPACK_IMPORTED_MODULE_2__[/* TranslatePipe */ \"c\"]], styles: [\"\"] });\n    return PrimaryHeaderComponent;\n})();\n\n\n/***/ })\n\n}]);","inputSourceMap":null}