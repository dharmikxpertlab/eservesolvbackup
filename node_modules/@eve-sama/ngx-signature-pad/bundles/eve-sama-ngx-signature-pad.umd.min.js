!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("signature_pad"),require("@angular/cdk/overlay"),require("@angular/cdk/portal"),require("@angular/common")):"function"==typeof define&&define.amd?define("@eve-sama/ngx-signature-pad",["exports","@angular/core","signature_pad","@angular/cdk/overlay","@angular/cdk/portal","@angular/common"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self)["eve-sama"]=t["eve-sama"]||{},t["eve-sama"]["ngx-signature-pad"]={}),t.ng.core,t.signature_pad,t.ng.cdk.overlay,t.ng.cdk.portal,t.ng.common)}(this,(function(t,e,i,n,s,a){"use strict";function o(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r=o(i),h=function(){function t(t,i,n){this.renderer2=t,this.overlay=i,this.viewContainerRef=n,this.signDataHistory=[],this._isEmpty=!0,this.isFullScreen=!1,this.options={},this.beginSign=new e.EventEmitter,this.endSign=new e.EventEmitter}return Object.defineProperty(t.prototype,"activePad",{get:function(){return this.isFullScreen?this.bigPad:this.smallPad},enumerable:!1,configurable:!0}),t.prototype.fullScreen=function(){this.portal=new s.TemplatePortal(this.fullScreenTpl,this.viewContainerRef),this.overlayRef=this.overlay.create({positionStrategy:this.overlay.position().global(),scrollStrategy:this.overlay.scrollStrategies.block(),height:"100%",width:"100%"}),this.overlayRef.attach(this.portal),this.initBigPad();var t=this.options,e=t.width,i=t.height,n=this.bigCanvas.getContext("2d");n.save(),n.translate(this.fullScreenWidth,0),n.rotate(90*Math.PI/180),n.drawImage(this.smallCanvas,0,0,e,i,0,0,this.fullScreenHeight,this.fullScreenWidth),n.restore(),this.isFullScreen=!0},t.prototype.miniScreen=function(){this.smallPad.clear();var t=this.options,e=t.width,i=t.height,n=e/this.fullScreenHeight,s=i/this.fullScreenWidth,a=this.smallCanvas.getContext("2d");a.save(),a.translate(0,i),a.rotate(-90*Math.PI/180),a.drawImage(this.bigCanvas,0,0,this.fullScreenWidth,this.fullScreenHeight,0,0,this.fullScreenWidth*n,this.fullScreenHeight*s),a.restore(),this.overlayRef.dispose(),this.bigCanvas=null,this.bigPad=null,this.isFullScreen=!1},t.prototype.toData=function(){return this.activePad.toData()},t.prototype.fromData=function(t){this.activePad.fromData(t)},t.prototype.toDataURL=function(t){switch(t){case"image/jpeg":return this.activePad.toDataURL("image/jpeg");case"image/svg+xml":return this.activePad.toDataURL("image/svg+xml");default:return this.activePad.toDataURL()}},t.prototype.revert=function(){this.signDataHistory.pop(),this.fromData(this.signDataHistory),0===this.signDataHistory.length&&this.setEmpty()},t.prototype.clear=function(){this.setEmpty(),this.signDataHistory=[],this.activePad.clear()},t.prototype.isEmpty=function(){return this._isEmpty},t.prototype.setDirty=function(){this._isEmpty=!1},t.prototype.setEmpty=function(){this._isEmpty=!0},t.prototype.getContext=function(){return this.isFullScreen?this.bigCanvas.getContext("2d"):this.smallCanvas.getContext("2d")},t.prototype.initBigPad=function(){this.bigCanvas=document.querySelector("#nsp-big");var t=JSON.parse(JSON.stringify(this.options));this.fullScreenWidth=document.documentElement.clientWidth;var e=this.options,i=e.width,n=e.height;this.fullScreenHeight=this.fullScreenWidth*i/n;var s=document.documentElement.clientHeight-this.fullScreenHeight;this.sectionHeight=s/2,t.width=this.fullScreenWidth,t.height=this.fullScreenHeight;var a=t.css;for(var o in this.bigCanvas.width=this.fullScreenWidth,this.bigCanvas.height=this.fullScreenHeight,a)if(Object.prototype.hasOwnProperty.call(a,o)){var h=a[o];this.renderer2.setStyle(this.bigCanvas,o,h)}this.bigPad=new r.default(this.bigCanvas,t),this.bigPad.onBegin=this._onBegin.bind(this),this.bigPad.onEnd=this._onEnd.bind(this)},t.prototype.initSmallPad=function(){this.smallCanvas=document.querySelector("#nsp-small");var t=this.options,e=t.width,i=t.height,n=t.css;for(var s in this.options.width=e||300,this.options.height=i||150,this.smallCanvas.width=this.options.width,this.smallCanvas.height=this.options.height,n)if(Object.prototype.hasOwnProperty.call(n,s)){var a=n[s];this.renderer2.setStyle(this.smallCanvas,s,a)}this.smallPad=new r.default(this.smallCanvas,this.options),this.smallPad.onBegin=this._onBegin.bind(this),this.smallPad.onEnd=this._onEnd.bind(this)},t.prototype._onBegin=function(){this.setDirty(),this.beginSign.emit()},t.prototype._onEnd=function(){this.signDataHistory=this.toData(),this.endSign.emit()},t.prototype.setPadAttribute=function(t,e){this.bigPad&&(this.bigPad[t]=e),this.smallPad[t]=e},t.prototype.ngOnInit=function(){this.initSmallPad()},t.prototype.ngOnChanges=function(t){var e=this;if(!t.options.firstChange){var i=t.options.currentValue,n=i.dotSize,s=i.minWidth,a=i.maxWidth,o=i.throttle,r=i.minDistance,h=i.backgroundColor,l=i.penColor,d=i.velocityFilterWeight,c=i.width,p=i.height,g=i.css;if(n&&this.setPadAttribute("dotSize",n),s&&this.setPadAttribute("minWidth",s),a&&this.setPadAttribute("maxWidth",a),o&&this.setPadAttribute("throttle",o),r&&this.setPadAttribute("minDistance",r),h&&this.setPadAttribute("backgroundColor",h),l&&this.setPadAttribute("penColor",l),d&&this.setPadAttribute("velocityFilterWeight",d),c||p){var u=t.options.previousValue,f=u.width,m=u.height,v=this.smallPad.toDataURL(),y=new Image;y.src=v,y.onload=function(){e.initSmallPad(),e.smallCanvas.getContext("2d").drawImage(y,0,0,f,m,0,0,c,p)}}if(g){if(this.bigCanvas)for(var b in g)if(Object.prototype.hasOwnProperty.call(g,b)){var S=g[b];this.renderer2.setStyle(this.bigCanvas,b,S)}if(this.smallCanvas)for(var b in g)if(Object.prototype.hasOwnProperty.call(g,b)){S=g[b];this.renderer2.setStyle(this.smallCanvas,b,S)}}}},t}();h.decorators=[{type:e.Component,args:[{selector:"ngx-signature-pad",template:'<canvas id="nsp-small"></canvas>\n\n<ng-template #fullScreenTpl>\n  <div class="nsp-container">\n    <div class="section left" style="width: 100%;" [ngStyle]="{\'height\': sectionHeight + \'px\'}"></div>\n    <canvas id="nsp-big"></canvas>\n    <div class="section right" style="width: 100%;" [ngStyle]="{\'height\': sectionHeight + \'px\'}"></div>\n    <ng-content></ng-content>\n  </div>\n</ng-template>',styles:[".nsp-container{display:flex;flex-direction:column;position:fixed;left:0;top:0;width:100%;height:100vh;background:#fff}.nsp-container .section{flex:1}.nsp-container .section.left{border-bottom:2px dashed #dedee5}.nsp-container .section.right{border-top:2px dashed #dedee5}"]}]}],h.ctorParameters=function(){return[{type:e.Renderer2},{type:n.Overlay},{type:e.ViewContainerRef}]},h.propDecorators={options:[{type:e.Input}],beginSign:[{type:e.Output}],endSign:[{type:e.Output}],fullScreenTpl:[{type:e.ViewChild,args:["fullScreenTpl"]}]};var l=function(){};l.decorators=[{type:e.NgModule,args:[{imports:[a.CommonModule,n.OverlayModule],declarations:[h],exports:[h]}]}],t.NgxSignaturePadComponent=h,t.NgxSignaturePadModule=l,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=eve-sama-ngx-signature-pad.umd.min.js.map