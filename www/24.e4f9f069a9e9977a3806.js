(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"787t":function(e,t,i){"use strict";i.d(t,"a",function(){return s});var o=i("mrSG"),r=i("LvDl"),n=i("fXoL"),a=i("7jUV"),c=i("T0Tu");let s=(()=>{class e{constructor(e,t,i){this.companyService=e,this.accountService=t,this.locationService=i}getCompanies(){return Object(o.a)(this,void 0,void 0,function*(){return yield(yield this.companyService.companiesList()).toPromise()})}getLocations(){return Object(o.a)(this,void 0,void 0,function*(){return yield this.locationService.getLocations()})}getUserInfo(){return Object(o.a)(this,void 0,void 0,function*(){return yield(yield this.accountService.accountUserMeRetrieve()).toPromise().then(e=>(e.options&&(e.options.experience&&(e.options.experience=r.sortBy(e.options.experience,"name")),e.options.certificates&&(e.options.certificates=r.sortBy(e.options.certificates,"name")),e.options.training&&(e.options.training=r.sortBy(e.options.training,"name"))),e))})}updateUserInfo(e){return Object(o.a)(this,void 0,void 0,function*(){return yield(yield this.accountService.accountUserPartialUpdate$FormData({id:e.id,body:e})).toPromise()})}updateServiceProviderProfile(e){return Object(o.a)(this,void 0,void 0,function*(){return yield(yield this.accountService.accountUserPartialUpdate$Json({id:e.id,body:e})).toPromise()})}getUserById(e){return Object(o.a)(this,void 0,void 0,function*(){return yield(yield this.accountService.accountUserRetrieve({id:e})).toPromise()})}uploadProfilePicture(e,t){return Object(o.a)(this,void 0,void 0,function*(){return yield(yield this.accountService.accountUserProfilePictureUpdate({id:e.id,body:{profile_picture:t}})).toPromise()})}}return e.\u0275fac=function(t){return new(t||e)(n.Xb(a.b),n.Xb(a.a),n.Xb(c.a))},e.\u0275prov=n.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},JnOY:function(e,t,i){"use strict";i.r(t),i.d(t,"CustomerPageModule",function(){return C});var o=i("tyNb"),r=i("mrSG"),n=i("3Pt+"),a=i("v++7"),c=i("W4DG"),s=i("LvDl"),u=i("fXoL"),l=i("787t"),d=i("TEn/"),p=i("qO5g"),b=i("ofXK"),m=i("kmnG"),f=i("qFsG"),v=i("sYmb");function y(e,t){if(1&e&&(u.Tb(0,"mat-form-field",3),u.Tb(1,"mat-label"),u.Bc(2),u.fc(3,"translate"),u.Sb(),u.Ob(4,"input",11),u.Sb()),2&e){const e=u.ec();u.Cb(2),u.Cc(u.gc(3,2,"Username")),u.Cb(2),u.lc("value",e.user.username)}}const h=[{path:"",component:(()=>{class e{constructor(e,t,i){this.profileFacadeService=e,this.navController=t,this.router=i,this.profileForm=new n.h({id:new n.e(null),company:new n.e("",n.x.required),email:new n.e("",n.x.required),first_name:new n.e("",n.x.required),last_name:new n.e("",n.x.required),is_service_provider:new n.e("",n.x.required),phone:new n.e("",n.x.required)})}get company(){return this.companies&&this.profileForm.get("company").value?s.find(this.companies,{id:this.profileForm.get("company").value}):null}ngOnInit(){return Object(r.a)(this,void 0,void 0,function*(){this.companies=yield this.profileFacadeService.getCompanies(),this.user=yield this.profileFacadeService.getUserInfo(),this.updateForm()})}updateForm(){this.profileForm.patchValue(Object.assign({company:this.companies[this.user.company]},this.user))}updateProfile(){return Object(r.a)(this,void 0,void 0,function*(){this.user=yield this.profileFacadeService.updateUserInfo(this.profileForm.value),this.updateForm()})}}return e.\u0275fac=function(t){return new(t||e)(u.Nb(l.a),u.Nb(d.T),u.Nb(o.g))},e.\u0275cmp=u.Hb({type:e,selectors:[["app-customer"]],decls:33,vars:24,consts:[[3,"title"],[1,"ion-padding",3,"formGroup","ngSubmit"],["appearance","outline","color","primary",4,"ngIf"],["appearance","outline","color","primary"],["type","text","matInput","","formControlName","first_name"],["appearance","outline"],["type","text","matInput","","formControlName","last_name"],["type","text","matInput","","formControlName","phone"],["type","email","matInput","","formControlName","email"],["expand","block","mode","md","type","submit",1,"ion-margin-top","ion-margin-bottom",3,"disabled"],["routerLink","/auth/password/change","mode","md","expand","block","fill","outline"],["type","text","matInput","","disabled","",1,"disabled-input",3,"value"]],template:function(e,t){1&e&&(u.Tb(0,"ion-header"),u.Tb(1,"app-primary-header",0),u.fc(2,"translate"),u.Ob(3,"ion-back-button"),u.Sb(),u.Sb(),u.Tb(4,"ion-content"),u.Tb(5,"form",1),u.bc("ngSubmit",function(){return t.updateProfile()}),u.zc(6,y,5,4,"mat-form-field",2),u.Tb(7,"mat-form-field",3),u.Tb(8,"mat-label"),u.Bc(9),u.fc(10,"translate"),u.Sb(),u.Ob(11,"input",4),u.Sb(),u.Tb(12,"mat-form-field",5),u.Tb(13,"mat-label"),u.Bc(14),u.fc(15,"translate"),u.Sb(),u.Ob(16,"input",6),u.Sb(),u.Tb(17,"mat-form-field",5),u.Tb(18,"mat-label"),u.Bc(19),u.fc(20,"translate"),u.Sb(),u.Ob(21,"input",7),u.Sb(),u.Tb(22,"mat-form-field",5),u.Tb(23,"mat-label"),u.Bc(24),u.fc(25,"translate"),u.Sb(),u.Ob(26,"input",8),u.Sb(),u.Tb(27,"ion-button",9),u.Bc(28),u.fc(29,"translate"),u.Sb(),u.Tb(30,"ion-button",10),u.Bc(31),u.fc(32,"translate"),u.Sb(),u.Sb(),u.Sb()),2&e&&(u.Cb(1),u.lc("title",u.gc(2,10,"Profile")),u.Cb(4),u.lc("formGroup",t.profileForm),u.Cb(1),u.lc("ngIf",t.user&&t.user.username),u.Cb(3),u.Cc(u.gc(10,12,"First Name")),u.Cb(5),u.Cc(u.gc(15,14,"Last Name")),u.Cb(5),u.Cc(u.gc(20,16,"Phone")),u.Cb(5),u.Cc(u.gc(25,18,"E-Mail")),u.Cb(3),u.lc("disabled",!t.profileForm.valid),u.Cb(1),u.Cc(u.gc(29,20,"Update")),u.Cb(3),u.Cc(u.gc(32,22,"Change Password")))},directives:[d.s,p.a,d.f,d.g,d.p,n.y,n.q,n.i,b.m,m.b,m.e,f.b,n.c,n.p,n.g,d.i,d.X,o.h],pipes:[v.c],styles:[""]}),Object(r.b)([Object(a.a)(),Object(c.a)()],e.prototype,"updateProfile",null),e})()}];let S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.Lb({type:e}),e.\u0275inj=u.Kb({imports:[[o.j.forChild(h)],o.j]}),e})();var g=i("PCNd");let C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.Lb({type:e}),e.\u0275inj=u.Kb({imports:[[g.a,S]]}),e})()},T0Tu:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var o=i("mrSG"),r=i("fXoL"),n=i("7jUV"),a=i("IYfF");let c=(()=>{class e{constructor(e,t){this.locationService=e,this.authService=t}getLocations(){return Object(o.a)(this,void 0,void 0,function*(){return yield(yield this.locationService.locationsList()).toPromise()})}getLocation(e){return Object(o.a)(this,void 0,void 0,function*(){return yield(yield this.locationService.locationsRetrieve({id:e})).toPromise()})}addLocation(e){return Object(o.a)(this,void 0,void 0,function*(){const t=yield(yield this.authService.getUserInfo()).company;return e.company=t,yield(yield this.locationService.locationsCreate$Json({body:e})).toPromise()})}updateLocation(e){return Object(o.a)(this,void 0,void 0,function*(){return yield(yield this.locationService.locationsPartialUpdate$Json({id:e.id,body:e})).toPromise()})}deleteLocation(e){return Object(o.a)(this,void 0,void 0,function*(){return yield(yield this.locationService.locationsDestroy({id:e.id})).toPromise()})}}return e.\u0275fac=function(t){return new(t||e)(r.Xb(n.e),r.Xb(a.a))},e.\u0275prov=r.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},W4DG:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var o=i("mrSG"),r=i("TEn/");function n(){return(e,t,i)=>{const n=i.value;return i.value=function(...e){return Object(o.a)(this,void 0,void 0,function*(){let t;const i=new r.R,o=yield i.create();yield o.present();try{t=yield n.apply(this,e)}catch(a){throw o.dismiss(),a}return o.dismiss(),t})},i}}},"v++7":function(e,t,i){"use strict";i.d(t,"a",function(){return u});var o=i("mrSG"),r=i("TEn/"),n=i("1Xxd"),a=i("LvDl"),c=i("fXoL");let s=(()=>{class e{static toDisplayMessage(e){e.error&&(e=e.error);const t=n.a.getService();return Object.entries(e).map(([e,i])=>{const o=a.startCase(a.camelCase(e));return a.isPlainObject(i)?this.toDisplayMessage(i):a.isArray(i)?`${t.instant(o)}: ${i.join(", ")}`:`${t.instant(o)}: ${i}`}).join("\n")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function u(e="Success!",t=!0,i=null){return(a,c,u)=>{const l=u.value;return u.value=function(...a){return Object(o.a)(this,void 0,void 0,function*(){const o=new r.Z,c=n.a.getService();let u,d;i&&(i=c.instant(i));try{d=yield l.apply(this,a),t&&(u=yield o.create({message:c.instant(e),duration:2e3,position:"bottom",color:"success"}),u.present())}catch(p){u=yield o.create({header:c.instant("Error!"),message:i||s.toDisplayMessage(p),duration:2e4,position:"middle",color:"primary",cssClass:"error-toast",buttons:[{text:c.instant("OK"),role:"cancel"}]}),u.present();const e=document.querySelector(".error-toast");e.shadowRoot.querySelector(".toast-header").setAttribute("style","font-weight: bold; font-size: 1.4em"),e.shadowRoot.querySelector(".toast-button-inner").setAttribute("style","font-weight: bold")}return d})},u}}}}]);