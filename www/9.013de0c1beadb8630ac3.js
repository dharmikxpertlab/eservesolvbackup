(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{T0Tu:function(t,e,o){"use strict";o.d(e,"a",function(){return r});var n=o("mrSG"),i=o("fXoL"),a=o("7jUV"),c=o("IYfF");let r=(()=>{class t{constructor(t,e){this.locationService=t,this.authService=e}getLocations(){return Object(n.a)(this,void 0,void 0,function*(){return yield(yield this.locationService.locationsList()).toPromise()})}getLocation(t){return Object(n.a)(this,void 0,void 0,function*(){return yield(yield this.locationService.locationsRetrieve({id:t})).toPromise()})}addLocation(t){return Object(n.a)(this,void 0,void 0,function*(){const e=yield(yield this.authService.getUserInfo()).company;return t.company=e,yield(yield this.locationService.locationsCreate$Json({body:t})).toPromise()})}updateLocation(t){return Object(n.a)(this,void 0,void 0,function*(){return yield(yield this.locationService.locationsPartialUpdate$Json({id:t.id,body:t})).toPromise()})}deleteLocation(t){return Object(n.a)(this,void 0,void 0,function*(){return yield(yield this.locationService.locationsDestroy({id:t.id})).toPromise()})}}return t.\u0275fac=function(e){return new(e||t)(i.Xb(a.e),i.Xb(c.a))},t.\u0275prov=i.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},W4DG:function(t,e,o){"use strict";o.d(e,"a",function(){return a});var n=o("mrSG"),i=o("TEn/");function a(){return(t,e,o)=>{const a=o.value;return o.value=function(...t){return Object(n.a)(this,void 0,void 0,function*(){let e;const o=new i.R,n=yield o.create();yield n.present();try{e=yield a.apply(this,t)}catch(c){throw n.dismiss(),c}return n.dismiss(),e})},o}}},fMB5:function(t,e,o){"use strict";o.r(e),o.d(e,"LocationEditPageModule",function(){return N});var n=o("tyNb"),i=o("mrSG"),a=o("3Pt+"),c=o("roZI"),r=o("v++7"),s=o("rX50"),l=o("W4DG"),d=o("fXoL"),u=o("T0Tu"),b=o("IYfF"),m=o("qSrz"),f=o("TEn/"),p=o("ofXK"),h=o("kmnG"),v=o("qFsG"),y=o("qO5g"),g=o("bTqV"),S=o("4Y7C"),C=o("sYmb");function O(t,e){1&t&&(d.Tb(0,"app-primary-header",13),d.fc(1,"translate"),d.Ob(2,"ion-back-button",14),d.Sb()),2&t&&(d.lc("title",d.gc(1,2,"Location Management")),d.Cb(2),d.lc("defaultHref","/locations"))}function L(t,e){if(1&t&&(d.Tb(0,"app-primary-header",13),d.Ob(1,"ion-back-button",14),d.Sb()),2&t){const t=d.ec();d.lc("title",t.location.name),d.Cb(1),d.lc("defaultHref","/locations")}}const j=function(t){return["/locations",t,"machines"]};function T(t,e){if(1&t&&(d.Tb(0,"button",17),d.Bc(1),d.fc(2,"translate"),d.Sb()),2&t){const t=d.ec(2);d.lc("routerLink",d.pc(4,j,t.location.id)),d.Cb(1),d.Cc(d.gc(2,2,"Machine Management"))}}const k=function(t){return[t]};function w(t,e){if(1&t&&(d.Tb(0,"div",15),d.zc(1,T,3,6,"button",16),d.Sb()),2&t){const t=d.ec();d.Cb(1),d.lc("ngxPermissionsOnly",d.pc(1,k,t.Roles.MacManager))}}function I(t,e){if(1&t){const t=d.Ub();d.Tb(0,"app-form-footer",18),d.bc("saveButtonClick",function(){return d.tc(t),d.ec().addOrUpdate()}),d.Sb()}}function P(t,e){if(1&t){const t=d.Ub();d.Tb(0,"ion-button",19),d.bc("click",function(){d.tc(t);const e=d.ec();return e.deleteLocation(e.location)}),d.Bc(1),d.fc(2,"translate"),d.Sb()}2&t&&(d.Cb(1),d.Cc(d.gc(2,1,"Delete")))}const F=[{path:"",component:(()=>{class t{constructor(t,e,o,n,i){this.locationFacadeService=t,this.router=e,this.activatedRoute=o,this.authService=n,this.perm=i,this.Roles=c.e,this.locationForm=new a.h({id:new a.e(null),address:new a.e(""),city:new a.e(""),zip_code:new a.e(""),company:new a.e(null),name:new a.e(""),remark:new a.e("")})}ngOnInit(){return Object(i.a)(this,void 0,void 0,function*(){const t=this.activatedRoute.snapshot.params;t.location&&(this.location=yield this.locationFacadeService.getLocation(t.location),this.locationForm.patchValue(Object.assign({},this.location)))})}addOrUpdate(){return Object(i.a)(this,void 0,void 0,function*(){this.location&&this.location.id?yield this.updateLocation():yield this.addLocation()})}addLocation(){return Object(i.a)(this,void 0,void 0,function*(){this.location=yield this.locationFacadeService.addLocation(this.locationForm.value)})}updateLocation(){return Object(i.a)(this,void 0,void 0,function*(){this.location=yield this.locationFacadeService.updateLocation(this.locationForm.value)})}deleteLocation(t){return Object(i.a)(this,void 0,void 0,function*(){yield this.locationFacadeService.deleteLocation(t),yield this.router.navigate(["/locations"])})}}return t.\u0275fac=function(e){return new(e||t)(d.Nb(u.a),d.Nb(n.g),d.Nb(n.a),d.Nb(b.a),d.Nb(m.c))},t.\u0275cmp=d.Hb({type:t,selectors:[["app-location-edit"]],decls:37,vars:26,consts:[[3,"title",4,"ngIf"],["class","ion-margin-top ion-padding-start ion-padding-end",4,"ngIf"],[1,"ion-no-margin","strong","ion-margin-start"],[1,"ion-padding",3,"formGroup","ngSubmit"],["appearance","outline","color","primary"],["matInput","","formControlName","name"],["matInput","","formControlName","address"],["appearance","outline"],["type","text","matInput","","formControlName","zip_code"],["type","text","matInput","","formControlName","city"],["type","text","matInput","","formControlName","remark"],[3,"saveButtonClick",4,"ngxPermissionsOnly"],["expand","block","mode","md","class","ion-margin-top ion-margin-bottom",3,"click",4,"ngIf"],[3,"title"],[3,"defaultHref"],[1,"ion-margin-top","ion-padding-start","ion-padding-end"],["mat-stroked-button","","color","primary","routerLinkActive","router-link-active",3,"routerLink",4,"ngxPermissionsOnly"],["mat-stroked-button","","color","primary","routerLinkActive","router-link-active",3,"routerLink"],[3,"saveButtonClick"],["expand","block","mode","md",1,"ion-margin-top","ion-margin-bottom",3,"click"]],template:function(t,e){1&t&&(d.Tb(0,"ion-header"),d.zc(1,O,3,4,"app-primary-header",0),d.zc(2,L,2,2,"app-primary-header",0),d.Sb(),d.Tb(3,"ion-content"),d.zc(4,w,2,3,"div",1),d.Ob(5,"br"),d.Tb(6,"h5",2),d.Bc(7),d.fc(8,"translate"),d.Sb(),d.Tb(9,"form",3),d.bc("ngSubmit",function(){return e.addOrUpdate()}),d.Tb(10,"mat-form-field",4),d.Tb(11,"mat-label"),d.Bc(12),d.fc(13,"translate"),d.Sb(),d.Ob(14,"input",5),d.Sb(),d.Tb(15,"mat-form-field",4),d.Tb(16,"mat-label"),d.Bc(17),d.fc(18,"translate"),d.Sb(),d.Ob(19,"input",6),d.Sb(),d.Tb(20,"mat-form-field",7),d.Tb(21,"mat-label"),d.Bc(22),d.fc(23,"translate"),d.Sb(),d.Ob(24,"input",8),d.Sb(),d.Tb(25,"mat-form-field",7),d.Tb(26,"mat-label"),d.Bc(27),d.fc(28,"translate"),d.Sb(),d.Ob(29,"input",9),d.Sb(),d.Tb(30,"mat-form-field",7),d.Tb(31,"mat-label"),d.Bc(32),d.fc(33,"translate"),d.Sb(),d.Ob(34,"input",10),d.Sb(),d.zc(35,I,1,0,"app-form-footer",11),d.zc(36,P,3,3,"ion-button",12),d.Sb(),d.Sb()),2&t&&(d.Cb(1),d.lc("ngIf",!e.location),d.Cb(1),d.lc("ngIf",e.location),d.Cb(2),d.lc("ngIf",e.location&&e.location.id),d.Cb(3),d.Cc(d.gc(8,12,"Address")),d.Cb(2),d.lc("formGroup",e.locationForm),d.Cb(3),d.Cc(d.gc(13,14,"Designation")),d.Cb(5),d.Cc(d.gc(18,16,"Street / Housenumber")),d.Cb(5),d.Cc(d.gc(23,18,"Pincode")),d.Cb(5),d.Cc(d.gc(28,20,"Place")),d.Cb(5),d.Cc(d.gc(33,22,"Remarks")),d.Cb(3),d.lc("ngxPermissionsOnly",d.pc(24,k,e.Roles.LocManager)),d.Cb(1),d.lc("ngIf",e.location))},directives:[f.s,p.m,f.p,a.y,a.q,a.i,h.b,h.e,v.b,a.c,a.p,a.g,m.a,y.a,f.f,f.g,g.a,n.i,f.X,n.h,S.a,f.i],pipes:[C.c],styles:["button[_ngcontent-%COMP%]{width:100%}"]}),Object(i.b)([Object(r.a)(),Object(l.a)()],t.prototype,"addOrUpdate",null),Object(i.b)([Object(s.a)("Deleting Location"),Object(l.a)(),Object(r.a)("",!0,"Cannot delete this location because it is being used by an Order")],t.prototype,"deleteLocation",null),t})()}];let B=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.Lb({type:t}),t.\u0275inj=d.Kb({imports:[[n.j.forChild(F)],n.j]}),t})();var M=o("PCNd");let N=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.Lb({type:t}),t.\u0275inj=d.Kb({imports:[[M.a,B,m.b.forChild()]]}),t})()},"v++7":function(t,e,o){"use strict";o.d(e,"a",function(){return l});var n=o("mrSG"),i=o("TEn/"),a=o("1Xxd"),c=o("LvDl"),r=o("fXoL");let s=(()=>{class t{static toDisplayMessage(t){t.error&&(t=t.error);const e=a.a.getService();return Object.entries(t).map(([t,o])=>{const n=c.startCase(c.camelCase(t));return c.isPlainObject(o)?this.toDisplayMessage(o):c.isArray(o)?`${e.instant(n)}: ${o.join(", ")}`:`${e.instant(n)}: ${o}`}).join("\n")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function l(t="Success!",e=!0,o=null){return(c,r,l)=>{const d=l.value;return l.value=function(...c){return Object(n.a)(this,void 0,void 0,function*(){const n=new i.Z,r=a.a.getService();let l,u;o&&(o=r.instant(o));try{u=yield d.apply(this,c),e&&(l=yield n.create({message:r.instant(t),duration:2e3,position:"bottom",color:"success"}),l.present())}catch(b){l=yield n.create({header:r.instant("Error!"),message:o||s.toDisplayMessage(b),duration:2e4,position:"middle",color:"primary",cssClass:"error-toast",buttons:[{text:r.instant("OK"),role:"cancel"}]}),l.present();const t=document.querySelector(".error-toast");t.shadowRoot.querySelector(".toast-header").setAttribute("style","font-weight: bold; font-size: 1.4em"),t.shadowRoot.querySelector(".toast-button-inner").setAttribute("style","font-weight: bold")}return u})},l}}}}]);