(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{T0Tu:function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i("mrSG"),a=i("fXoL"),o=i("7jUV"),c=i("IYfF");let r=(()=>{class t{constructor(t,e){this.locationService=t,this.authService=e}getLocations(){return Object(n.a)(this,void 0,void 0,function*(){return yield(yield this.locationService.locationsList()).toPromise()})}getLocation(t){return Object(n.a)(this,void 0,void 0,function*(){return yield(yield this.locationService.locationsRetrieve({id:t})).toPromise()})}addLocation(t){return Object(n.a)(this,void 0,void 0,function*(){const e=yield(yield this.authService.getUserInfo()).company;return t.company=e,yield(yield this.locationService.locationsCreate$Json({body:t})).toPromise()})}updateLocation(t){return Object(n.a)(this,void 0,void 0,function*(){return yield(yield this.locationService.locationsPartialUpdate$Json({id:t.id,body:t})).toPromise()})}deleteLocation(t){return Object(n.a)(this,void 0,void 0,function*(){return yield(yield this.locationService.locationsDestroy({id:t.id})).toPromise()})}}return t.\u0275fac=function(e){return new(e||t)(a.Xb(o.e),a.Xb(c.a))},t.\u0275prov=a.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"U+pL":function(t,e,i){"use strict";i.r(e),i.d(e,"MachineEditPageModule",function(){return T});var n=i("tyNb"),a=i("mrSG"),o=i("3Pt+"),c=i("v++7"),r=i("rX50"),s=i("W4DG"),l=i("fXoL"),d=i("T0Tu"),u=i("c8Zb"),b=i("TEn/"),m=i("ofXK"),h=i("kmnG"),p=i("qFsG"),f=i("4Y7C"),v=i("qO5g"),y=i("sYmb");function g(t,e){if(1&t&&(l.Tb(0,"app-primary-header",10),l.fc(1,"translate"),l.Ob(2,"ion-back-button",11),l.Sb()),2&t){const t=l.ec();l.lc("title",l.gc(1,2,"Machine Management")),l.Cb(2),l.lc("defaultHref","/locations/"+t.location.id+"/edit")}}function S(t,e){if(1&t&&(l.Tb(0,"app-primary-header",10),l.Ob(1,"ion-back-button",11),l.Sb()),2&t){const t=l.ec();l.lc("title",t.machine.manufacturer),l.Cb(1),l.lc("defaultHref","/locations/"+t.location.id+"/edit")}}function O(t,e){if(1&t){const t=l.Ub();l.Tb(0,"ion-button",12),l.bc("click",function(){l.tc(t);const e=l.ec();return e.deleteMachine(e.machine)}),l.Bc(1),l.fc(2,"translate"),l.Sb()}2&t&&(l.Cb(1),l.Cc(l.gc(2,1,"Delete")))}const C=[{path:"",component:(()=>{class t{constructor(t,e,i,n){this.activatedRoute=t,this.locationFacadeService=e,this.machineFacadeService=i,this.router=n,this.machineForm=new o.h({id:new o.e(null),location:new o.e(null),manufacturer:new o.e(""),type:new o.e(""),serial_number:new o.e(""),remark:new o.e("")})}ngOnInit(){return Object(a.a)(this,void 0,void 0,function*(){const t=this.activatedRoute.snapshot.params;t.location&&(this.location=yield this.locationFacadeService.getLocation(+t.location),this.machineForm.patchValue({location:this.location.id})),t.machine&&(this.machine=yield this.machineFacadeService.getMachine(+t.machine),this.machineForm.patchValue(Object.assign({},this.machine)))})}addOrUpdate(){return Object(a.a)(this,void 0,void 0,function*(){this.machine&&this.machine.id?yield this.updateMachine():yield this.addMachine()})}addMachine(){return Object(a.a)(this,void 0,void 0,function*(){this.machine=yield this.machineFacadeService.addMachine(this.machineForm.value)})}updateMachine(){return Object(a.a)(this,void 0,void 0,function*(){this.machine=yield this.machineFacadeService.updateMachine(this.machineForm.value)})}deleteMachine(t){return Object(a.a)(this,void 0,void 0,function*(){yield this.machineFacadeService.deleteMachine(this.machine),yield this.router.navigate(["/locations",this.location.id,"machines"])})}}return t.\u0275fac=function(e){return new(e||t)(l.Nb(n.a),l.Nb(d.a),l.Nb(u.a),l.Nb(n.g))},t.\u0275cmp=l.Hb({type:t,selectors:[["app-machine-edit"]],decls:27,vars:16,consts:[[3,"title",4,"ngIf"],[1,"ion-padding",3,"formGroup","ngSubmit"],["appearance","outline","color","primary"],["matInput","","formControlName","manufacturer"],["appearance","outline"],["type","text","matInput","","formControlName","type"],["type","text","matInput","","formControlName","serial_number"],["type","text","matInput","","formControlName","remark"],[3,"saveButtonClick"],["expand","block","mode","md","class","ion-margin-top ion-margin-bottom",3,"click",4,"ngIf"],[3,"title"],[3,"defaultHref"],["expand","block","mode","md",1,"ion-margin-top","ion-margin-bottom",3,"click"]],template:function(t,e){1&t&&(l.Tb(0,"ion-header"),l.zc(1,g,3,4,"app-primary-header",0),l.zc(2,S,2,2,"app-primary-header",0),l.Sb(),l.Tb(3,"ion-content"),l.Tb(4,"form",1),l.bc("ngSubmit",function(){return e.addOrUpdate()}),l.Tb(5,"mat-form-field",2),l.Tb(6,"mat-label"),l.Bc(7),l.fc(8,"translate"),l.Sb(),l.Ob(9,"input",3),l.Sb(),l.Tb(10,"mat-form-field",4),l.Tb(11,"mat-label"),l.Bc(12),l.fc(13,"translate"),l.Sb(),l.Ob(14,"input",5),l.Sb(),l.Tb(15,"mat-form-field",4),l.Tb(16,"mat-label"),l.Bc(17),l.fc(18,"translate"),l.Sb(),l.Ob(19,"input",6),l.Sb(),l.Tb(20,"mat-form-field",4),l.Tb(21,"mat-label"),l.Bc(22),l.fc(23,"translate"),l.Sb(),l.Ob(24,"input",7),l.Sb(),l.Tb(25,"app-form-footer",8),l.bc("saveButtonClick",function(){return e.addOrUpdate()}),l.Sb(),l.zc(26,O,3,3,"ion-button",9),l.Sb(),l.Sb()),2&t&&(l.Cb(1),l.lc("ngIf",e.location&&!e.machine),l.Cb(1),l.lc("ngIf",e.location&&e.machine),l.Cb(2),l.lc("formGroup",e.machineForm),l.Cb(3),l.Cc(l.gc(8,8,"Manufacturer")),l.Cb(5),l.Cc(l.gc(13,10,"Type")),l.Cb(5),l.Cc(l.gc(18,12,"Serial number")),l.Cb(5),l.Cc(l.gc(23,14,"Remarks")),l.Cb(4),l.lc("ngIf",e.machine))},directives:[b.s,m.m,b.p,o.y,o.q,o.i,h.b,h.e,p.b,o.c,o.p,o.g,f.a,v.a,b.f,b.g,b.i],pipes:[y.c],styles:[""]}),Object(a.b)([Object(s.a)(),Object(c.a)()],t.prototype,"addOrUpdate",null),Object(a.b)([Object(r.a)("Deleting Machine"),Object(s.a)(),Object(c.a)("",!0,"Cannot delete this machine because it is being used by an Order")],t.prototype,"deleteMachine",null),t})()}];let j=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Lb({type:t}),t.\u0275inj=l.Kb({imports:[[n.j.forChild(C)],n.j]}),t})();var w=i("PCNd");let T=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Lb({type:t}),t.\u0275inj=l.Kb({imports:[[w.a,j]]}),t})()},W4DG:function(t,e,i){"use strict";i.d(e,"a",function(){return o});var n=i("mrSG"),a=i("TEn/");function o(){return(t,e,i)=>{const o=i.value;return i.value=function(...t){return Object(n.a)(this,void 0,void 0,function*(){let e;const i=new a.R,n=yield i.create();yield n.present();try{e=yield o.apply(this,t)}catch(c){throw n.dismiss(),c}return n.dismiss(),e})},i}}},"v++7":function(t,e,i){"use strict";i.d(e,"a",function(){return l});var n=i("mrSG"),a=i("TEn/"),o=i("1Xxd"),c=i("LvDl"),r=i("fXoL");let s=(()=>{class t{static toDisplayMessage(t){t.error&&(t=t.error);const e=o.a.getService();return Object.entries(t).map(([t,i])=>{const n=c.startCase(c.camelCase(t));return c.isPlainObject(i)?this.toDisplayMessage(i):c.isArray(i)?`${e.instant(n)}: ${i.join(", ")}`:`${e.instant(n)}: ${i}`}).join("\n")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function l(t="Success!",e=!0,i=null){return(c,r,l)=>{const d=l.value;return l.value=function(...c){return Object(n.a)(this,void 0,void 0,function*(){const n=new a.Z,r=o.a.getService();let l,u;i&&(i=r.instant(i));try{u=yield d.apply(this,c),e&&(l=yield n.create({message:r.instant(t),duration:2e3,position:"bottom",color:"success"}),l.present())}catch(b){l=yield n.create({header:r.instant("Error!"),message:i||s.toDisplayMessage(b),duration:2e4,position:"middle",color:"primary",cssClass:"error-toast",buttons:[{text:r.instant("OK"),role:"cancel"}]}),l.present();const t=document.querySelector(".error-toast");t.shadowRoot.querySelector(".toast-header").setAttribute("style","font-weight: bold; font-size: 1.4em"),t.shadowRoot.querySelector(".toast-button-inner").setAttribute("style","font-weight: bold")}return u})},l}}}}]);