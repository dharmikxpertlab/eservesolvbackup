(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{wx4d:function(e,t,i){"use strict";i.r(t),i.d(t,"ServiceProviderPageModule",function(){return U});var o=i("tyNb"),n=i("mrSG"),r=i("3Pt+"),a=i("v++7"),c=i("W4DG"),l=i("JqHY"),s=i("rvvs"),b=i("/s3u"),p=i("AytR"),u=i("fXoL"),f=i("787t"),d=i("TEn/"),m=i("qO5g"),g=i("ofXK"),h=i("kmnG"),v=i("qFsG"),C=i("d3UM"),S=i("FKr1"),T=i("QTxr"),y=i("sYmb");const O=["profilePictureButton"];function w(e,t){if(1&e&&u.Ob(0,"img",33),2&e){const e=u.ec(2);u.lc("src",e.user.profile.profile_picture,u.uc)}}function x(e,t){1&e&&u.Ob(0,"img",34)}function F(e,t){if(1&e){const e=u.Ub();u.Tb(0,"div",29),u.zc(1,w,1,1,"img",30),u.zc(2,x,1,0,"img",31),u.Tb(3,"ion-icon",32),u.bc("click",function(){return u.tc(e),u.ec().clickFileInput()}),u.Sb(),u.Sb()}if(2&e){const e=u.ec();u.Cb(1),u.lc("ngIf",e.user.profile&&e.user.profile.profile_picture),u.Cb(1),u.lc("ngIf",!e.user.profile||!e.user.profile.profile_picture)}}function I(e,t){if(1&e&&(u.Tb(0,"mat-form-field",10),u.Tb(1,"mat-label"),u.Bc(2),u.fc(3,"translate"),u.Sb(),u.Ob(4,"input",35),u.Sb()),2&e){const e=u.ec();u.Cb(2),u.Cc(u.gc(3,2,"Username")),u.Cb(2),u.lc("value",e.user.username)}}function P(e,t){if(1&e&&(u.Tb(0,"mat-option",36),u.Bc(1),u.Sb()),2&e){const e=t.$implicit;u.lc("value",e.id),u.Cb(1),u.Dc(" ",e.name," ")}}function j(e,t){if(1&e){const e=u.Ub();u.Rb(0),u.Tb(1,"app-accordion",38),u.bc("optionsChangeEvent",function(i){u.tc(e);const o=t.$implicit;return u.ec(2).updateOptions(i,o.type)}),u.Sb(),u.Qb()}if(2&e){const e=t.$implicit,i=t.index,o=u.ec(2);u.Cb(1),u.mc("title",e.name),u.mc("titleIndex",i+1),u.lc("values",o.profileForm.get("profile").get(e.type).value)("options",o.user.options[e.type])("mode",e)("useSubGroups",!0)}}function B(e,t){if(1&e&&(u.Rb(0),u.zc(1,j,2,6,"ng-container",37),u.Qb()),2&e){const e=u.ec();u.Cb(1),u.lc("ngForOf",e.Options)}}const N=[{path:"",component:(()=>{class e{constructor(e,t,i,o){this.profileFacadeService=e,this.navController=t,this.router=i,this.activatedRoute=o,this.Options=l.b,this.environment=p.a,this.available=!1,this.profileForm=new r.h({id:new r.e(null),profile:new r.h({available:new r.e(!1),location:new r.e(""),rate_standard:new r.e(null),rate_emergency:new r.e(null),user:new r.e(null),description:new r.e(""),skills:new r.e([]),experience:new r.e([]),certificates:new r.e([]),training:new r.e([])}),email:new r.e("",r.x.required),first_name:new r.e("",r.x.required),last_name:new r.e("",r.x.required),phone:new r.e("",r.x.required)})}ngOnInit(){return Object(n.a)(this,void 0,void 0,function*(){this.addOptionsToLocationDropdown(),yield this.setUser(),this.updateForm()})}setUser(){return Object(n.a)(this,void 0,void 0,function*(){const e=this.activatedRoute.snapshot.params.serviceProviderUserId;this.user=e?yield this.profileFacadeService.getUserById(e):yield this.profileFacadeService.getUserInfo()})}addOptionsToLocationDropdown(){return Object(n.a)(this,void 0,void 0,function*(){this.locations=yield this.profileFacadeService.getLocations()})}updateProfile(){return Object(n.a)(this,void 0,void 0,function*(){const e=yield this.profileFacadeService.updateServiceProviderProfile(this.profileForm.value);this.user=e,this.updateForm()})}updateForm(){this.profileForm.patchValue(Object.assign({},this.user))}updateOptions(e,t){const i=e.filter(e=>e.isChecked).map(e=>e.id),o={};o[t]=i,this.profileForm.patchValue({profile:o})}toggleStatus(){return Object(n.a)(this,void 0,void 0,function*(){const e=this.profileForm.get("profile.available").value;this.profileForm.patchValue({profile:{available:e}}),yield this.updateProfile()})}clickFileInput(){return Object(n.a)(this,void 0,void 0,function*(){"web"!==(yield s.a.getInfo()).platform&&(yield b.a.requestPermissions()),this.profilePictureButton.nativeElement.click()})}selectFileToUpload(e){this.uploadDocument(e.target.files[0])}uploadDocument(e){return Object(n.a)(this,void 0,void 0,function*(){yield this.profileFacadeService.uploadProfilePicture(this.user,e),this.user=yield this.profileFacadeService.getUserInfo()})}}return e.\u0275fac=function(t){return new(t||e)(u.Nb(f.a),u.Nb(d.T),u.Nb(o.g),u.Nb(o.a))},e.\u0275cmp=u.Hb({type:e,selectors:[["app-service-provider"]],viewQuery:function(e,t){if(1&e&&u.Gc(O,1),2&e){let e;u.rc(e=u.cc())&&(t.profilePictureButton=e.first)}},decls:78,vars:45,consts:[[3,"title"],["defaultHref","/technicians/dashboard"],[1,"ion-padding",3,"formGroup","ngSubmit"],["lines","none","class","ion-margin-bottom ion-text-center profile-picture",4,"ngIf"],["type","file",1,"display-none","file-input",3,"change"],["profilePictureButton",""],["lines","none","formGroupName","profile",1,"ion-margin-bottom","margin-auto","ion-text-center"],[1,"margin-auto","ion-text-center","available-toggle"],["mode","md","formControlName","available",3,"click"],["appearance","outline","color","primary",4,"ngIf"],["appearance","outline","color","primary"],["type","text","matInput","","formControlName","first_name"],["appearance","outline"],["type","text","matInput","","formControlName","last_name"],["type","text","matInput","","formControlName","phone"],["type","email","matInput","","formControlName","email"],["formGroupName","profile"],["type","text","matInput","","formControlName","description"],["formControlName","location"],[3,"value",4,"ngFor","ngForOf"],[1,"strong"],["size","6"],["appearance","outline","floatLabel","always"],["placeholder","0.00","type","text","matInput","","formControlName","rate_standard"],["matSuffix",""],["placeholder","0.00","type","text","matInput","","formControlName","rate_emergency"],[4,"ngIf"],["expand","block","mode","md","type","submit",1,"ion-margin-top","ion-margin-bottom",3,"disabled"],["routerLink","/auth/password/change","mode","md","expand","block","fill","outline"],["lines","none",1,"ion-margin-bottom","ion-text-center","profile-picture"],["class","margin-auto",3,"src",4,"ngIf"],["class","margin-auto","src","assets/icon/person-circle-outline.jpeg",4,"ngIf"],["name","camera",1,"margin-auto",3,"click"],[1,"margin-auto",3,"src"],["src","assets/icon/person-circle-outline.jpeg",1,"margin-auto"],["type","text","matInput","","disabled","",1,"disabled-input",3,"value"],[3,"value"],[4,"ngFor","ngForOf"],[3,"values","options","mode","useSubGroups","title","titleIndex","optionsChangeEvent"]],template:function(e,t){1&e&&(u.Tb(0,"ion-header"),u.Tb(1,"app-primary-header",0),u.fc(2,"translate"),u.Ob(3,"ion-back-button",1),u.Sb(),u.Sb(),u.Tb(4,"ion-content"),u.Tb(5,"form",2),u.bc("ngSubmit",function(){return t.updateProfile()}),u.zc(6,F,4,2,"div",3),u.Tb(7,"input",4,5),u.bc("change",function(e){return t.selectFileToUpload(e)}),u.Sb(),u.Tb(9,"ion-item",6),u.Tb(10,"div",7),u.Tb(11,"ion-toggle",8),u.bc("click",function(){return t.toggleStatus()}),u.Sb(),u.Tb(12,"ion-text"),u.Bc(13),u.fc(14,"translate"),u.Sb(),u.Sb(),u.Sb(),u.zc(15,I,5,4,"mat-form-field",9),u.Tb(16,"mat-form-field",10),u.Tb(17,"mat-label"),u.Bc(18),u.fc(19,"translate"),u.Sb(),u.Ob(20,"input",11),u.Sb(),u.Tb(21,"mat-form-field",12),u.Tb(22,"mat-label"),u.Bc(23),u.fc(24,"translate"),u.Sb(),u.Ob(25,"input",13),u.Sb(),u.Tb(26,"mat-form-field",12),u.Tb(27,"mat-label"),u.Bc(28),u.fc(29,"translate"),u.Sb(),u.Ob(30,"input",14),u.Sb(),u.Tb(31,"mat-form-field",12),u.Tb(32,"mat-label"),u.Bc(33),u.fc(34,"translate"),u.Sb(),u.Ob(35,"input",15),u.Sb(),u.Rb(36,16),u.Tb(37,"mat-form-field",12),u.Tb(38,"mat-label"),u.Bc(39),u.fc(40,"translate"),u.Sb(),u.Ob(41,"textarea",17),u.Sb(),u.Tb(42,"mat-form-field",12),u.Tb(43,"mat-label"),u.Bc(44),u.fc(45,"translate"),u.Sb(),u.Tb(46,"mat-select",18),u.zc(47,P,2,2,"mat-option",19),u.Sb(),u.Sb(),u.Tb(48,"h6",20),u.Bc(49),u.fc(50,"translate"),u.Sb(),u.Tb(51,"ion-grid"),u.Tb(52,"ion-row"),u.Tb(53,"ion-col",21),u.Tb(54,"div"),u.Tb(55,"mat-form-field",22),u.Tb(56,"mat-label"),u.Bc(57),u.fc(58,"translate"),u.Sb(),u.Ob(59,"input",23),u.Tb(60,"span",24),u.Bc(61,"\u20ac/h"),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Tb(62,"ion-col",21),u.Tb(63,"div"),u.Tb(64,"mat-form-field",22),u.Tb(65,"mat-label"),u.Bc(66),u.fc(67,"translate"),u.Sb(),u.Ob(68,"input",25),u.Tb(69,"span",24),u.Bc(70,"\u20ac/h"),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.zc(71,B,2,1,"ng-container",26),u.Qb(),u.Tb(72,"ion-button",27),u.Bc(73),u.fc(74,"translate"),u.Sb(),u.Tb(75,"ion-button",28),u.Bc(76),u.fc(77,"translate"),u.Sb(),u.Sb(),u.Sb()),2&e&&(u.Cb(1),u.lc("title",u.gc(2,19,"Profile")),u.Cb(4),u.lc("formGroup",t.profileForm),u.Cb(1),u.lc("ngIf",t.user),u.Cb(7),u.Dc(" ",u.gc(14,21,"Available"),""),u.Cb(2),u.lc("ngIf",t.user&&t.user.username),u.Cb(3),u.Cc(u.gc(19,23,"First Name")),u.Cb(5),u.Cc(u.gc(24,25,"Last Name")),u.Cb(5),u.Cc(u.gc(29,27,"Phone")),u.Cb(5),u.Cc(u.gc(34,29,"E-Mail")),u.Cb(6),u.Cc(u.gc(40,31,"Description")),u.Cb(5),u.Cc(u.gc(45,33,"Location")),u.Cb(3),u.lc("ngForOf",t.locations),u.Cb(2),u.Cc(u.gc(50,35,"Compensation")),u.Cb(8),u.Cc(u.gc(58,37,"Standard Rate")),u.Cb(9),u.Cc(u.gc(67,39,"Emergency Rate")),u.Cb(5),u.lc("ngIf",t.user),u.Cb(1),u.lc("disabled",!t.profileForm.valid),u.Cb(1),u.Cc(u.gc(74,41,"Update")),u.Cb(3),u.Cc(u.gc(77,43,"Change Password")))},directives:[d.s,m.a,d.f,d.g,d.p,r.y,r.q,r.i,g.m,d.v,r.j,d.N,d.b,r.p,r.g,d.K,h.b,h.e,v.b,r.c,C.a,g.l,d.r,d.G,d.o,h.f,d.i,d.X,o.h,d.t,S.h,T.a],pipes:[y.c],styles:["mat-slide-toggle[_ngcontent-%COMP%]{margin:auto}.profile-picture[_ngcontent-%COMP%]{position:relative}.profile-picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:100%;object-fit:cover;border:2px solid #d3d3d3}.profile-picture[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{position:absolute;top:calc(100% - 30px);left:calc(50% + 10px);height:20px;width:20px;background:#d3d3d3;border-radius:100%;border:1px solid grey;padding:6px}.available-toggle[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),Object(n.b)([Object(a.a)(),Object(c.a)()],e.prototype,"updateProfile",null),Object(n.b)([Object(c.a)(),Object(a.a)("",!1)],e.prototype,"uploadDocument",null),e})()}];let _=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.Lb({type:e}),e.\u0275inj=u.Kb({imports:[[o.j.forChild(N)],o.j]}),e})();var k=i("PCNd");let U=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.Lb({type:e}),e.\u0275inj=u.Kb({imports:[[k.a,_]]}),e})()}}]);