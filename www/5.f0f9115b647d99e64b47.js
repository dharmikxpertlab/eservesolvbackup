(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"1Ss9":function(e,t,n){"use strict";n.d(t,"a",function(){return M});var o=n("mrSG"),r=n("fXoL"),i=n("3Pt+"),c=n("B/XX"),s=n("roZI"),a=n("v++7"),d=n("TEn/"),l=n("sYmb");let u=(()=>{class e{constructor(e){this.popoverController=e}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(r.Nb(d.W))},e.\u0275cmp=r.Hb({type:e,selectors:[["app-confirm-order-accept"]],decls:11,vars:9,consts:[[1,"ion-padding","ion-text-center"],["mode","md","color","primary",3,"click"]],template:function(e,t){1&e&&(r.Tb(0,"div",0),r.Tb(1,"ion-text"),r.Tb(2,"h3"),r.Bc(3),r.fc(4,"translate"),r.Sb(),r.Sb(),r.Tb(5,"p"),r.Bc(6),r.fc(7,"translate"),r.Sb(),r.Tb(8,"ion-button",1),r.bc("click",function(){return t.popoverController.dismiss({approved:!0})}),r.Bc(9),r.fc(10,"translate"),r.Sb(),r.Sb()),2&e&&(r.Cb(3),r.Cc(r.gc(4,3,"Accept Binding")),r.Cb(3),r.Cc(r.gc(7,5,"I hereby agree to the terms and conditions and would now like to bindingly accept the order.")),r.Cb(3),r.Dc(" ",r.gc(10,7,"Accept Order")," "))},directives:[d.K,d.i],pipes:[l.c],styles:[""]}),e})();var p=n("W4DG"),b=n("Y/kA"),f=n("f9SP");const m=["signature"],g=["orderPin"];let h=(()=>{class e{constructor(e){this.modalController=e,this.options={backgroundColor:"#F4F5F5",width:window.innerWidth-32,css:{"border-radius":"0"}},this.otpInputConfig={otpLength:4}}ngOnInit(){}save(){return Object(o.a)(this,void 0,void 0,function*(){this.img=this.signature.toDataURL();const e=yield(yield fetch(this.img)).blob(),t=new File([e],"fileName.png",{type:"image/png"});this.modalController.dismiss({image:t,otp:this.otp})})}clearSignature(){this.signature.clear()}clearOTP(){this.ngxOtp.clear()}dismissModal(){this.modalController.dismiss()}otpInputFilled(e){this.otp=e}}return e.\u0275fac=function(t){return new(t||e)(r.Nb(d.S))},e.\u0275cmp=r.Hb({type:e,selectors:[["app-signature"]],viewQuery:function(e,t){if(1&e&&(r.Gc(m,1),r.Gc(g,1)),2&e){let e;r.rc(e=r.cc())&&(t.signature=e.first),r.rc(e=r.cc())&&(t.ngxOtp=e.first)}},decls:25,vars:17,consts:[["translucent",""],["slot","end"],[3,"click"],[1,"ion-padding"],["lines","none",1,"ion-no-padding"],[3,"options"],["signature",""],["mode","md",1,"ion-margin-bottom",3,"click"],["lines","none",1,"ion-no-padding","ion-margin-vertical"],[3,"config","fill"],["orderPin",""],["mode","md","expand","block",3,"click"]],template:function(e,t){1&e&&(r.Tb(0,"ion-header",0),r.Tb(1,"ion-toolbar"),r.Tb(2,"ion-buttons",1),r.Tb(3,"ion-button",2),r.bc("click",function(){return t.dismissModal()}),r.Bc(4),r.fc(5,"translate"),r.Sb(),r.Sb(),r.Sb(),r.Sb(),r.Tb(6,"ion-content",3),r.Tb(7,"p"),r.Bc(8),r.fc(9,"translate"),r.Sb(),r.Tb(10,"ion-item",4),r.Ob(11,"ngx-signature-pad",5,6),r.Sb(),r.Tb(13,"ion-button",7),r.bc("click",function(){return t.clearSignature()}),r.Bc(14),r.fc(15,"translate"),r.Sb(),r.Tb(16,"ion-item",8),r.Tb(17,"ngx-otp-input",9,10),r.bc("fill",function(e){return t.otpInputFilled(e)}),r.Sb(),r.Sb(),r.Tb(19,"ion-button",7),r.bc("click",function(){return t.clearOTP()}),r.Bc(20),r.fc(21,"translate"),r.Sb(),r.Tb(22,"ion-button",11),r.bc("click",function(){return t.save()}),r.Bc(23),r.fc(24,"translate"),r.Sb(),r.Sb()),2&e&&(r.Cb(4),r.Cc(r.gc(5,7,"Close")),r.Cb(4),r.Dc(" ",r.gc(9,9,"I hereby confirm that the work has been completed. I am entitled to confirm.")," "),r.Cb(3),r.lc("options",t.options),r.Cb(3),r.Cc(r.gc(15,11,"Clear")),r.Cb(3),r.lc("config",t.otpInputConfig),r.Cb(3),r.Cc(r.gc(21,13,"Clear")),r.Cb(3),r.Cc(r.gc(24,15,"Save")))},directives:[d.s,d.O,d.j,d.i,d.p,d.v,b.a,f.a],pipes:[l.c],styles:["canvas[_ngcontent-%COMP%]{border:1px solid #000;pointer-events:all}span[_ngcontent-%COMP%]{width:300px}ngx-otp-input[_ngcontent-%COMP%]{margin-top:1em}"]}),e})();var v=n("7jUV"),y=n("qSrz"),S=n("l73M");let C=(()=>{class e{constructor(e,t,n,o,r,i,c){this.employeeService=e,this.orderService=t,this.modalController=n,this.permissionService=o,this.employeeFacade=r,this.popoverController=i,this.translateService=c}getRole(){return Object(o.a)(this,void 0,void 0,function*(){const e=yield this.permissionService.getPermissions();return Object.keys(e).indexOf(s.e.Customer)>-1?s.e.Customer:Object.keys(e).indexOf(s.e.SpEmployee)>-1?s.e.SpEmployee:s.e.Customer})}openConfirmationPopover(){return Object(o.a)(this,void 0,void 0,function*(){const e=yield this.popoverController.create({component:u,cssClass:"confirm-search-candidates-popover",translucent:!1});yield e.present();const{data:t}=yield e.onDidDismiss();return!(!t||!t.approved)})}confirmAndacceptOrder(e){return Object(o.a)(this,void 0,void 0,function*(){if(!(yield this.openConfirmationPopover()))throw Error("Cannot proceed without accepting binding order!");yield this.acceptOrder(e)})}acceptOrder(e){return Object(o.a)(this,void 0,void 0,function*(){return yield(yield this.employeeService.employeesOrdersAcceptRetrieve({id:e.id,employee:this.employeeFacade.employeeSelectedByManager.getValue()})).toPromise().catch(e=>{if(e&&e.error)throw e.error.detail=this.translateService.instant("ORDER_ALREADY_ACCEPTED"),e})})}cancelOrder(e){return Object(o.a)(this,void 0,void 0,function*(){return yield(yield this.orderService.ordersCancelRetrieve({id:e.id})).toPromise()})}retrieveOrder(e){return Object(o.a)(this,void 0,void 0,function*(){return yield(yield this.employeeService.employeesOrdersRetrieve({id:e.id})).toPromise()})}setOrderStatus(e,t,n=null){return Object(o.a)(this,void 0,void 0,function*(){const n={status:t};switch(t){case s.f.Accepted:return yield this.confirmAndacceptOrder(e);case s.f.Cancelled:return yield this.cancelOrder(e);case s.f.Complete:return void(yield this.getSignature(e))}return yield(yield this.employeeService.employeesOrdersStatusPartialUpdate$FormData({id:e.id,body:n,employee:this.employeeFacade.employeeSelectedByManager.getValue()})).toPromise().catch(e=>{if(e&&e.error)throw e.error.detail=this.translateService.instant("ORDER_STATUS_SET_ALREADY"),e})})}getSignature(e){return Object(o.a)(this,void 0,void 0,function*(){const t=yield this.modalController.create({component:h});t.present();const n=yield t.onDidDismiss();n.data&&(yield this.completeOrder(e,n.data.image,n.data.otp,s.f.Complete))})}completeOrder(e,t,n,r){return Object(o.a)(this,void 0,void 0,function*(){return yield(yield this.employeeService.employeesOrdersStatusPartialUpdate$FormData({employee:this.employeeFacade.employeeSelectedByManager.getValue(),id:e.id,body:{status:r,signature:t,order_pin:n}})).toPromise()})}isOrderAccepted(e){return e.accepted_at}isOrderWorkCompleted(e){return e.work_completed_at}isItemState(e,t){return e.orderState===t}}return e.\u0275fac=function(t){return new(t||e)(r.Xb(v.d),r.Xb(v.g),r.Xb(d.S),r.Xb(y.c),r.Xb(S.a),r.Xb(d.W),r.Xb(l.d))},e.\u0275prov=r.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),Object(o.b)([Object(p.a)()],e.prototype,"acceptOrder",null),Object(o.b)([Object(a.a)("",!1,"Order pin does not match.")],e.prototype,"getSignature",null),Object(o.b)([Object(p.a)()],e.prototype,"completeOrder",null),e})();var O=n("xHqg"),_=n("ofXK"),T=n("bTqV"),w=n("NFeN");const x=["stepper"];function P(e,t){if(1&e&&(r.Bc(0),r.fc(1,"translate")),2&e){const e=r.ec().$implicit;r.Cc(r.gc(1,1,e.label))}}function I(e,t){if(1&e&&(r.Tb(0,"ion-note"),r.Bc(1),r.fc(2,"translate"),r.fc(3,"date"),r.Sb()),2&e){const e=r.ec().$implicit,t=r.ec();r.Fb("ion-padding-start",t.customer),r.Cb(1),r.Ec(" ",r.gc(2,4,"Done at")," ",r.hc(3,6,t.order[e.formField],"MMM d, y, h:mm:ss a")," ")}}function k(e,t){if(1&e&&(r.Tb(0,"ion-item",12),r.Tb(1,"ion-note"),r.Bc(2),r.fc(3,"translate"),r.Sb(),r.Sb()),2&e){const e=r.ec().$implicit;r.Cb(2),r.Dc(" ",r.gc(3,1,e.text)," \xa0 ")}}function B(e,t){if(1&e){const e=r.Ub();r.Tb(0,"div"),r.Tb(1,"button",13),r.bc("click",function(){r.tc(e);const t=r.ec().$implicit;return r.ec().performAction(t.orderState)}),r.Bc(2),r.fc(3,"translate"),r.Sb(),r.Sb()}2&e&&(r.Cb(2),r.Cc(r.gc(3,1,"Confirm")))}function j(e,t){if(1&e&&(r.Rb(0),r.Tb(1,"mat-step",7),r.zc(2,P,2,3,"ng-template",8),r.zc(3,I,4,9,"ion-note",9),r.zc(4,k,4,3,"ion-item",10),r.zc(5,B,4,3,"div",11),r.Sb(),r.Qb()),2&e){const e=t.$implicit,n=r.ec();r.Cb(1),r.lc("completed",n.formGroup.get(e.formField).valid)("stepControl",n.formGroup.get(e.formField)),r.Cb(2),r.lc("ngIf",n.formGroup.get(e.formField).valid),r.Cb(1),r.lc("ngIf",e.text),r.Cb(1),r.lc("ngIf",!n.formGroup.get(e.formField).valid&&n.serviceProvider)}}function D(e,t){1&e&&(r.Tb(0,"mat-icon"),r.Bc(1,"more_horiz"),r.Sb())}function E(e,t){1&e&&(r.Tb(0,"mat-icon"),r.Bc(1,"more_horiz"),r.Sb())}let M=(()=>{class e{constructor(e,t){this.changeDetector=e,this.orderStatusStepperService=t,this.orderStateChange=new r.o,this.formGroup=new i.h({cancelled_at:new i.e(null,i.x.required),accepted_at:new i.e(null,i.x.required),on_the_way_at:new i.e(null,i.x.required),work_started_at:new i.e(null,i.x.required),work_completed_at:new i.e(null,i.x.required),completed_at:new i.e(null,i.x.required)}),this.StatusEnum=s.f}get customer(){return!!this.role&&this.role===s.e.Customer}get serviceProvider(){return!!this.role&&this.role===s.e.SpEmployee}ngAfterViewInit(){return Object(o.a)(this,void 0,void 0,function*(){this.role=yield this.orderStatusStepperService.getRole(),this.updateForm(),this.updateStepper()})}performAction(e){return Object(o.a)(this,void 0,void 0,function*(){yield this.orderStatusStepperService.setOrderStatus(this.order,e),yield this.fetchOrder(),yield this.updateForm(),yield this.updateStepper(),this.stepper.next()})}fetchOrder(){return Object(o.a)(this,void 0,void 0,function*(){this.order=yield this.orderStatusStepperService.retrieveOrder(this.order),this.orderStateChange.emit(this.order.status)})}updateForm(){return Object(o.a)(this,void 0,void 0,function*(){yield this.formGroup.patchValue(Object.assign({},this.order))})}updateStepper(){return Object(o.a)(this,void 0,void 0,function*(){let e=0;this.stepper.steps.forEach((t,n)=>{"VALID"===t.stepControl.status&&(t.state="done",e=n)}),this.stepper.selectedIndex=e,this.changeDetector.detectChanges()})}}return e.\u0275fac=function(t){return new(t||e)(r.Nb(r.i),r.Nb(C))},e.\u0275cmp=r.Hb({type:e,selectors:[["app-order-status-stepper"]],viewQuery:function(e,t){if(1&e&&r.Gc(x,3),2&e){let e;r.rc(e=r.cc())&&(t.stepper=e.first)}},inputs:{order:"order",orderSteps:"orderSteps"},outputs:{orderStateChange:"orderStateChange"},features:[r.Bb([{provide:c.h,useValue:{displayDefaultIndicatorType:!1}}])],decls:9,vars:6,consts:[[3,"formGroup"],[1,"ion-padding-start","ion-padding-top","ion-no-margin"],["linear","false"],["stepper",""],[4,"ngFor","ngForOf"],["matStepperIcon","edit"],["matStepperIcon","number"],[3,"completed","stepControl"],["matStepLabel",""],[3,"ion-padding-start",4,"ngIf"],["lines","none","class","ion-no-padding",4,"ngIf"],[4,"ngIf"],["lines","none",1,"ion-no-padding"],["mat-flat-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(r.Tb(0,"form",0),r.Tb(1,"h6",1),r.Bc(2),r.fc(3,"translate"),r.Sb(),r.Tb(4,"mat-vertical-stepper",2,3),r.zc(6,j,6,5,"ng-container",4),r.zc(7,D,2,0,"ng-template",5),r.zc(8,E,2,0,"ng-template",6),r.Sb(),r.Sb()),2&e&&(r.lc("formGroup",t.formGroup),r.Cb(2),r.Cc(r.gc(3,4,"Status")),r.Cb(2),r.Db("class",t.role),r.Cb(2),r.lc("ngForOf",t.orderSteps))},directives:[i.y,i.q,i.i,O.e,_.l,O.c,O.a,O.b,_.m,d.C,d.v,T.a,w.a],pipes:[l.c,_.d],styles:["ion-note[_ngcontent-%COMP%]{font-size:12px}.label-button[_ngcontent-%COMP%]{width:80%}.disabled[_ngcontent-%COMP%]{pointer-events:none}"]}),Object(o.b)([Object(a.a)("",!1)],e.prototype,"performAction",null),e})()},"2vfo":function(e,t,n){"use strict";n.d(t,"a",function(){return f});var o=n("roZI"),r=n("fXoL"),i=n("qSrz"),c=n("ofXK"),s=n("LvhV"),a=n("TEn/"),d=n("sYmb");function l(e,t){if(1&e&&(r.Tb(0,"div",3),r.Tb(1,"h6"),r.Bc(2),r.fc(3,"translate"),r.Sb(),r.Tb(4,"p"),r.Bc(5),r.Sb(),r.Sb()),2&e){const e=r.ec();r.Cb(2),r.Cc(r.gc(3,4,"Machine")),r.Cb(3),r.Fc("",e.order.machine_description.manufacturer," ",e.order.machine_description.type," ",e.order.machine_description.serial_number,"")}}function u(e,t){if(1&e&&(r.Tb(0,"div",3),r.Tb(1,"h6"),r.Bc(2),r.fc(3,"translate"),r.Sb(),r.Tb(4,"p"),r.Bc(5),r.Sb(),r.Sb()),2&e){const e=r.ec();r.Cb(2),r.Cc(r.gc(3,2,"Job Description")),r.Cb(3),r.Cc(e.order.description)}}function p(e,t){if(1&e&&(r.Rb(0),r.Tb(1,"div",3),r.Tb(2,"h6"),r.Bc(3),r.fc(4,"translate"),r.Sb(),r.Tb(5,"p"),r.Bc(6),r.Sb(),r.Sb(),r.Qb()),2&e){const e=r.ec();r.Cb(3),r.Cc(r.gc(4,2,"what3words")),r.Cb(3),r.Cc(e.order.normalized_what_three_words)}}function b(e,t){if(1&e&&(r.Rb(0),r.Tb(1,"div",3),r.Tb(2,"h6"),r.Bc(3),r.fc(4,"translate"),r.Sb(),r.Tb(5,"p"),r.Bc(6),r.Sb(),r.Sb(),r.Qb()),2&e){const e=r.ec();r.Cb(3),r.Cc(r.gc(4,2,"Order completion PIN")),r.Cb(3),r.Cc(e.order.order_pin)}}let f=(()=>{class e{constructor(e){this.permissionsService=e,this.userType=o.e.Customer,this.RolesEnum=o.e}}return e.\u0275fac=function(t){return new(t||e)(r.Nb(i.c))},e.\u0275cmp=r.Hb({type:e,selectors:[["app-order-details-component"]],inputs:{order:"order",userType:"userType"},decls:32,vars:21,consts:[[1,"ion-padding-start","ion-padding-end"],["class","item",4,"ngIf"],[3,"showDeleteButton","documents"],[1,"item"],[4,"ngIf"],["mode","md",1,"ion-no-margin"],["lines","none"],["lines","none",1,"ion-align-self-center","ion-no-padding"],["slot","start","name","call-outline",1,"icon"],[3,"href"],["slot","start","name","mail-outline",1,"icon"]],template:function(e,t){1&e&&(r.Tb(0,"div",0),r.zc(1,l,6,6,"div",1),r.zc(2,u,6,4,"div",1),r.Ob(3,"app-order-document-preview",2),r.Tb(4,"div",3),r.Tb(5,"h6"),r.Bc(6),r.fc(7,"translate"),r.Sb(),r.Tb(8,"p"),r.Bc(9),r.Sb(),r.Tb(10,"p"),r.Bc(11),r.Sb(),r.Tb(12,"p"),r.Bc(13),r.Sb(),r.Sb(),r.zc(14,p,7,4,"ng-container",4),r.zc(15,b,7,4,"ng-container",4),r.Tb(16,"ion-card",5),r.Tb(17,"ion-item",6),r.Tb(18,"ion-label"),r.Tb(19,"h3"),r.Bc(20),r.fc(21,"translate"),r.Sb(),r.Tb(22,"p"),r.Bc(23),r.Sb(),r.Tb(24,"ion-item",7),r.Ob(25,"ion-icon",8),r.Tb(26,"a",9),r.Bc(27),r.Sb(),r.Sb(),r.Tb(28,"ion-item",7),r.Ob(29,"ion-icon",10),r.Tb(30,"a",9),r.Bc(31),r.Sb(),r.Sb(),r.Sb(),r.Sb(),r.Sb(),r.Sb()),2&e&&(r.Cb(1),r.lc("ngIf",t.order.machine_description),r.Cb(1),r.lc("ngIf",t.order.description),r.Cb(1),r.lc("showDeleteButton",!1)("documents",t.order.documents),r.Cb(3),r.Cc(r.gc(7,17,"Place of use")),r.Cb(3),r.Cc(t.order.location_description.company.name),r.Cb(2),r.Dc("",t.order.location_description.address," "),r.Cb(2),r.Ec("",t.order.location_description.zip_code," ",t.order.location_description.city,""),r.Cb(1),r.lc("ngIf",t.order.normalized_what_three_words&&t.order.accepted_at),r.Cb(1),r.lc("ngIf",t.userType===t.RolesEnum.Customer&&!t.order.completed_at),r.Cb(5),r.Cc(r.gc(21,19,"Your contact")),r.Cb(3),r.Cc(t.order.contact_person_full_name),r.Cb(3),r.nc("href","tel:",t.order.contact_person_phone,"",r.uc),r.Cb(1),r.Cc(t.order.contact_person_phone),r.Cb(3),r.nc("href","mailto:",t.order.contact_person_email,"",r.uc),r.Cb(1),r.Cc(t.order.contact_person_email))},directives:[c.m,s.a,a.k,a.v,a.x,a.t],pipes:[d.c],styles:["p[_ngcontent-%COMP%]{margin:0}div.item[_ngcontent-%COMP%]{margin-bottom:16px}h6[_ngcontent-%COMP%]{margin-bottom:4px}ion-label[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{font-size:12px;--min-height:1px}ion-label[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{height:12px;width:12px;margin-right:5px;margin-top:5px;margin-bottom:0}ion-label[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-top:2px}"]}),e})()},"3r7Z":function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"a",function(){return c});var o=n("roZI");const r=[{orderState:o.f.Accepted,label:"Accept Order",formField:"accepted_at"},{orderState:o.f.OnTheWay,label:"On the way",formField:"on_the_way_at"},{orderState:o.f.WorkStarted,label:"Work Started",formField:"work_started_at"},{orderState:o.f.WorkComplete,label:"Work Complete",formField:"work_completed_at"},{orderState:o.f.Complete,label:"Take Signature",formField:"completed_at",text:"Have the client confirm the completion of your work with a signature."}],i=[{orderState:o.f.Accepted,label:"Order Accepted",formField:"accepted_at"},{orderState:o.f.OnTheWay,label:"Technician on the way",formField:"on_the_way_at"},{orderState:o.f.WorkStarted,label:"Work Started",formField:"work_started_at"},{orderState:o.f.WorkComplete,label:"Work Complete",formField:"work_completed_at"},{orderState:o.f.Complete,label:"Order Completed",formField:"completed_at"}],c=[{key:o.f.Draft,value:"Draft"},{key:o.f.Finalized,value:"In Queue"},{key:o.f.Accepted,value:"Order Accepted"},{key:o.f.OnTheWay,value:"On the way"},{key:o.f.WorkStarted,value:"Work Started"},{key:o.f.WorkComplete,value:"Work Complete"},{key:o.f.Complete,value:"Order Completed"}]},"5d33":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n("FUe0");const r=Object(o.d)("Browser",{web:()=>n.e(60).then(n.bind(null,"fOPH")).then(e=>new e.BrowserWeb)})},"787t":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n("mrSG"),r=n("LvDl"),i=n("fXoL"),c=n("7jUV"),s=n("T0Tu");let a=(()=>{class e{constructor(e,t,n){this.companyService=e,this.accountService=t,this.locationService=n}getCompanies(){return Object(o.a)(this,void 0,void 0,function*(){return yield(yield this.companyService.companiesList()).toPromise()})}getLocations(){return Object(o.a)(this,void 0,void 0,function*(){return yield this.locationService.getLocations()})}getUserInfo(){return Object(o.a)(this,void 0,void 0,function*(){return yield(yield this.accountService.accountUserMeRetrieve()).toPromise().then(e=>(e.options&&(e.options.experience&&(e.options.experience=r.sortBy(e.options.experience,"name")),e.options.certificates&&(e.options.certificates=r.sortBy(e.options.certificates,"name")),e.options.training&&(e.options.training=r.sortBy(e.options.training,"name"))),e))})}updateUserInfo(e){return Object(o.a)(this,void 0,void 0,function*(){return yield(yield this.accountService.accountUserPartialUpdate$FormData({id:e.id,body:e})).toPromise()})}updateServiceProviderProfile(e){return Object(o.a)(this,void 0,void 0,function*(){return yield(yield this.accountService.accountUserPartialUpdate$Json({id:e.id,body:e})).toPromise()})}getUserById(e){return Object(o.a)(this,void 0,void 0,function*(){return yield(yield this.accountService.accountUserRetrieve({id:e})).toPromise()})}uploadProfilePicture(e,t){return Object(o.a)(this,void 0,void 0,function*(){return yield(yield this.accountService.accountUserProfilePictureUpdate({id:e.id,body:{profile_picture:t}})).toPromise()})}}return e.\u0275fac=function(t){return new(t||e)(i.Xb(c.b),i.Xb(c.a),i.Xb(s.a))},e.\u0275prov=i.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},E0Us:function(e,t,n){"use strict";n.d(t,"a",function(){return o});const o={amountPerHourSuffix:" \u20ac/h",amountSuffix:" \u20ac"}},LvhV:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var o=n("mrSG"),r=n("fXoL"),i=n("roZI"),c=n("5d33"),s=n("ofXK"),a=n("TEn/");function d(e,t){if(1&e&&r.Ob(0,"ion-img",6),2&e){const e=r.ec().$implicit;r.lc("src",e.document)}}function l(e,t){1&e&&r.Ob(0,"ion-img",7)}function u(e,t){if(1&e){const e=r.Ub();r.Tb(0,"div",8),r.bc("click",function(){r.tc(e);const t=r.ec().$implicit;return r.ec().delete(t.id)}),r.Ob(1,"ion-icon",9),r.Sb()}}function p(e,t){if(1&e){const e=r.Ub();r.Tb(0,"div"),r.Tb(1,"div",2),r.bc("click",function(){r.tc(e);const n=t.$implicit;return r.ec().view(n.document)}),r.zc(2,d,1,1,"ion-img",3),r.zc(3,l,1,0,"ion-img",4),r.Sb(),r.zc(4,u,2,0,"div",5),r.Sb()}if(2&e){const e=t.$implicit,n=r.ec();r.Cb(2),r.lc("ngIf",e.type===n.OrderDescriptionDocumentTypeEnum.Image),r.Cb(1),r.lc("ngIf",e.type===n.OrderDescriptionDocumentTypeEnum.Document),r.Cb(1),r.lc("ngIf",n.showDeleteButton)}}let b=(()=>{class e{constructor(){this.OrderDescriptionDocumentTypeEnum=i.d,this.deleteButtonEvent=new r.o,this.showDeleteButton=!0}ngOnInit(){}view(e){return Object(o.a)(this,void 0,void 0,function*(){yield c.a.open({url:e})})}delete(e){this.deleteButtonEvent.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Hb({type:e,selectors:[["app-order-document-preview"]],inputs:{documents:"documents",showDeleteButton:"showDeleteButton"},outputs:{deleteButtonEvent:"deleteButtonEvent"},decls:2,vars:1,consts:[[1,"document-items"],[4,"ngFor","ngForOf"],[1,"document-item",3,"click"],[3,"src",4,"ngIf"],["src","assets/images/document.svg",4,"ngIf"],["class","delete-button",3,"click",4,"ngIf"],[3,"src"],["src","assets/images/document.svg"],[1,"delete-button",3,"click"],["name","close-circle"]],template:function(e,t){1&e&&(r.Tb(0,"div",0),r.zc(1,p,5,3,"div",1),r.Sb()),2&e&&(r.Cb(1),r.lc("ngForOf",t.documents))},directives:[s.l,s.m,a.u,a.t],styles:[".document-item[_ngcontent-%COMP%]{width:60px;height:62px;padding:2px;border:1px solid #e5e5e5;margin:5px;border-radius:3px}.document-item[_ngcontent-%COMP%]:nth-child(4n){page-break-after:always;break-after:always}.document-items[_ngcontent-%COMP%]{display:flex}.delete-button[_ngcontent-%COMP%]{text-align:center;font-size:16px}ion-icon[_ngcontent-%COMP%]{height:25px;width:25px}ion-img[_ngcontent-%COMP%]{height:100%;max-height:62px}"]}),e})()},T0Tu:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n("mrSG"),r=n("fXoL"),i=n("7jUV"),c=n("IYfF");let s=(()=>{class e{constructor(e,t){this.locationService=e,this.authService=t}getLocations(){return Object(o.a)(this,void 0,void 0,function*(){return yield(yield this.locationService.locationsList()).toPromise()})}getLocation(e){return Object(o.a)(this,void 0,void 0,function*(){return yield(yield this.locationService.locationsRetrieve({id:e})).toPromise()})}addLocation(e){return Object(o.a)(this,void 0,void 0,function*(){const t=yield(yield this.authService.getUserInfo()).company;return e.company=t,yield(yield this.locationService.locationsCreate$Json({body:e})).toPromise()})}updateLocation(e){return Object(o.a)(this,void 0,void 0,function*(){return yield(yield this.locationService.locationsPartialUpdate$Json({id:e.id,body:e})).toPromise()})}deleteLocation(e){return Object(o.a)(this,void 0,void 0,function*(){return yield(yield this.locationService.locationsDestroy({id:e.id})).toPromise()})}}return e.\u0275fac=function(t){return new(t||e)(r.Xb(i.e),r.Xb(c.a))},e.\u0275prov=r.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},W4DG:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n("mrSG"),r=n("TEn/");function i(){return(e,t,n)=>{const i=n.value;return n.value=function(...e){return Object(o.a)(this,void 0,void 0,function*(){let t;const n=new r.R,o=yield n.create();yield o.present();try{t=yield i.apply(this,e)}catch(c){throw o.dismiss(),c}return o.dismiss(),t})},n}}},kfnZ:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n("fXoL"),r=n("ofXK");function i(e,t){if(1&e&&o.Ob(0,"img",2),2&e){const e=o.ec();o.lc("src",e.user.profile.profile_picture,o.uc)}}function c(e,t){1&e&&o.Ob(0,"img",3)}let s=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Hb({type:e,selectors:[["app-profile-picture"]],inputs:{user:"user"},decls:2,vars:2,consts:[["class","margin-auto",3,"src",4,"ngIf"],["class","margin-auto","src","assets/icon/person-circle-outline.jpeg",4,"ngIf"],[1,"margin-auto",3,"src"],["src","assets/icon/person-circle-outline.jpeg",1,"margin-auto"]],template:function(e,t){1&e&&(o.zc(0,i,1,1,"img",0),o.zc(1,c,1,0,"img",1)),2&e&&(o.lc("ngIf",t.user.profile&&t.user.profile.profile_picture),o.Cb(1),o.lc("ngIf",!t.user.profile||!t.user.profile.profile_picture))},directives:[r.m],styles:["img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:100%;object-fit:cover;border:2px solid #d3d3d3}"]}),e})()},l73M:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n("mrSG"),r=n("2Vo4"),i=n("roZI"),c=n("fXoL"),s=n("7jUV"),a=n("qSrz"),d=n("IYfF");let l=(()=>{class e{constructor(e,t,n,o){this.employeeService=e,this.companyService=t,this.permissions=n,this.authService=o,this.employeeSelectedByManager=new r.a(null)}getEmployeeOrders(){return Object(o.a)(this,void 0,void 0,function*(){const e=yield(yield this.employeeService.employeesOrdersList()).toPromise();if(yield this.permissions.hasPermission(i.e.SpEmpManager)){const t=yield(yield this.authService.getUserInfo()).id,n=[];for(const o of e)if(o.candidate_service_providers&&0!==o.candidate_service_providers.length)for(const e of o.candidate_service_providers)t===e.id&&(e.loggedInUser=!0),o.candidate=e,n.push(Object.assign({},o));else o.candidate=null,n.push(Object.assign({},o));return n}if(yield this.permissions.hasPermission(i.e.SpEmployee)){const t=yield(yield this.authService.getUserInfo()).id,n=[];for(const o of e)if(o.candidate_service_providers&&0!==o.candidate_service_providers.length){for(const e of o.candidate_service_providers)t===e.id&&(e.loggedInUser=!0,o.candidate=e);n.push(Object.assign({},o))}else o.candidate=null,n.push(Object.assign({},o));return n}return e})}getOrder(e){return Object(o.a)(this,void 0,void 0,function*(){return yield(yield this.employeeService.employeesOrdersRetrieve({id:e})).toPromise()})}getCompanyFromOrder(e){return Object(o.a)(this,void 0,void 0,function*(){return e.location_description.company})}chooseEmployee(e){return Object(o.a)(this,void 0,void 0,function*(){this.employeeSelectedByManager.next(e)})}resetChosenEmployee(){return Object(o.a)(this,void 0,void 0,function*(){this.employeeSelectedByManager.next(null)})}}return e.\u0275fac=function(t){return new(t||e)(c.Xb(s.d),c.Xb(s.b),c.Xb(a.c),c.Xb(d.a))},e.\u0275prov=c.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"v++7":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n("mrSG"),r=n("TEn/"),i=n("1Xxd"),c=n("LvDl"),s=n("fXoL");let a=(()=>{class e{static toDisplayMessage(e){e.error&&(e=e.error);const t=i.a.getService();return Object.entries(e).map(([e,n])=>{const o=c.startCase(c.camelCase(e));return c.isPlainObject(n)?this.toDisplayMessage(n):c.isArray(n)?`${t.instant(o)}: ${n.join(", ")}`:`${t.instant(o)}: ${n}`}).join("\n")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function d(e="Success!",t=!0,n=null){return(c,s,d)=>{const l=d.value;return d.value=function(...c){return Object(o.a)(this,void 0,void 0,function*(){const o=new r.Z,s=i.a.getService();let d,u;n&&(n=s.instant(n));try{u=yield l.apply(this,c),t&&(d=yield o.create({message:s.instant(e),duration:2e3,position:"bottom",color:"success"}),d.present())}catch(p){d=yield o.create({header:s.instant("Error!"),message:n||a.toDisplayMessage(p),duration:2e4,position:"middle",color:"primary",cssClass:"error-toast",buttons:[{text:s.instant("OK"),role:"cancel"}]}),d.present();const e=document.querySelector(".error-toast");e.shadowRoot.querySelector(".toast-header").setAttribute("style","font-weight: bold; font-size: 1.4em"),e.shadowRoot.querySelector(".toast-button-inner").setAttribute("style","font-weight: bold")}return u})},d}}},yNcl:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var o=n("roZI"),r=n("E0Us"),i=n("fXoL"),c=n("TEn/"),s=n("ofXK"),a=n("sYmb"),d=n("aEDk");function l(e,t){if(1&e&&(i.Tb(0,"p"),i.Bc(1),i.fc(2,"translate"),i.Sb()),2&e){const e=i.ec();i.Cb(1),i.Ec("",e.order.travelling_time_text," ",i.gc(2,2,"Hrs"),"")}}function u(e,t){1&e&&(i.Tb(0,"p"),i.Bc(1),i.fc(2,"translate"),i.Sb()),2&e&&(i.Cb(1),i.Dc("00.00 ",i.gc(2,1,"Hrs"),""))}function p(e,t){if(1&e&&(i.Tb(0,"p"),i.Bc(1),i.fc(2,"translate"),i.Sb()),2&e){const e=i.ec();i.Cb(1),i.Ec("",e.order.working_time_text," ",i.gc(2,2,"Hrs"),"")}}function b(e,t){1&e&&(i.Tb(0,"p"),i.Bc(1),i.fc(2,"translate"),i.Sb()),2&e&&(i.Cb(1),i.Dc("00.00 ",i.gc(2,1,"Hrs"),""))}function f(e,t){if(1&e&&(i.Tb(0,"p"),i.Bc(1),i.fc(2,"wrap"),i.Sb()),2&e){const e=i.ec();i.Cb(1),i.Cc(i.ic(2,1,e.order.travelling_cost_customer,"",e.Currency.amountSuffix))}}function m(e,t){if(1&e&&(i.Tb(0,"p"),i.Bc(1),i.fc(2,"wrap"),i.Sb()),2&e){const e=i.ec();i.Cb(1),i.Cc(i.ic(2,1,e.order.travelling_cost_employee,"",e.Currency.amountSuffix))}}function g(e,t){if(1&e&&(i.Tb(0,"p"),i.Bc(1),i.fc(2,"wrap"),i.Sb()),2&e){const e=i.ec();i.Cb(1),i.Cc(i.ic(2,1,e.order.working_cost_customer,"",e.Currency.amountSuffix))}}function h(e,t){if(1&e&&(i.Tb(0,"p"),i.Bc(1),i.fc(2,"wrap"),i.Sb()),2&e){const e=i.ec();i.Cb(1),i.Cc(i.ic(2,1,e.order.working_cost_employee,"",e.Currency.amountSuffix))}}let v=(()=>{class e{constructor(){this.Currency=r.a,this.userType=o.e.Customer,this.RolesEnum=o.e}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["app-order-completion-card"]],inputs:{order:"order",userType:"userType"},decls:50,vars:29,consts:[[1,"ion-no-padding"],["slot","start"],["color","success","name","checkmark-circle-outline"],[1,"ion-no-padding","ion-padding-top"],[1,"border-end"],[1,"ion-text-center"],[4,"ngIf"],[1,"border-left"],[1,"ion-margin-top","ion-margin-start"]],template:function(e,t){1&e&&(i.Tb(0,"ion-card"),i.Tb(1,"ion-card-content"),i.Tb(2,"ion-item",0),i.Tb(3,"ion-thumbnail",1),i.Ob(4,"ion-icon",2),i.Sb(),i.Tb(5,"ion-label"),i.Tb(6,"h3"),i.Bc(7),i.fc(8,"translate"),i.Sb(),i.Tb(9,"p"),i.Bc(10),i.fc(11,"date"),i.Sb(),i.Sb(),i.Sb(),i.Tb(12,"ion-grid",3),i.Tb(13,"ion-row"),i.Tb(14,"ion-col",4),i.Tb(15,"ion-row"),i.Tb(16,"ion-col"),i.Tb(17,"ion-text",5),i.Tb(18,"h3"),i.Bc(19),i.fc(20,"translate"),i.Sb(),i.zc(21,l,3,4,"p",6),i.zc(22,u,3,3,"p",6),i.Sb(),i.Sb(),i.Tb(23,"ion-col"),i.Tb(24,"ion-text",5),i.Tb(25,"h3"),i.Bc(26),i.fc(27,"translate"),i.Sb(),i.zc(28,p,3,4,"p",6),i.zc(29,b,3,3,"p",6),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Tb(30,"ion-col",7),i.Tb(31,"ion-row"),i.Tb(32,"ion-col"),i.Tb(33,"ion-text",5),i.Tb(34,"h3"),i.Bc(35),i.fc(36,"translate"),i.Sb(),i.zc(37,f,3,5,"p",6),i.zc(38,m,3,5,"p",6),i.Sb(),i.Sb(),i.Tb(39,"ion-col"),i.Tb(40,"ion-text",5),i.Tb(41,"h3"),i.Bc(42),i.fc(43,"translate"),i.Sb(),i.zc(44,g,3,5,"p",6),i.zc(45,h,3,5,"p",6),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Tb(46,"ion-row"),i.Tb(47,"ion-note",8),i.Bc(48),i.fc(49,"translate"),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb()),2&e&&(i.Cb(7),i.Cc(i.gc(8,15,"Order Completed")),i.Cb(3),i.Cc(i.gc(11,17,t.order.completed_at)),i.Cb(9),i.Cc(i.gc(20,19,"Travel Time")),i.Cb(2),i.lc("ngIf",t.order.travelling_time_text),i.Cb(1),i.lc("ngIf",!t.order.travelling_time_text),i.Cb(4),i.Cc(i.gc(27,21,"Working Time")),i.Cb(2),i.lc("ngIf",t.order.working_time_text),i.Cb(1),i.lc("ngIf",!t.order.working_time_text),i.Cb(6),i.Dc("",i.gc(36,23,"Traveling Cost"),"*"),i.Cb(2),i.lc("ngIf",t.userType===t.RolesEnum.Customer),i.Cb(1),i.lc("ngIf",t.userType===t.RolesEnum.SpEmployee),i.Cb(4),i.Dc("",i.gc(43,25,"Working Cost"),"*"),i.Cb(2),i.lc("ngIf",t.userType===t.RolesEnum.Customer),i.Cb(1),i.lc("ngIf",t.userType===t.RolesEnum.SpEmployee),i.Cb(3),i.Dc(" *",i.gc(49,27,"NOTE_ORDER_COMPLETION")," "))},directives:[c.k,c.l,c.v,c.L,c.t,c.x,c.r,c.G,c.o,c.K,s.m,c.C],pipes:[a.c,s.d,d.d],styles:["ion-icon[_ngcontent-%COMP%]{height:56px;width:56px}ion-label[_ngcontent-%COMP%]{text-overflow:clip!important}ion-col[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:10px}ion-card-content[_ngcontent-%COMP%]{padding:6px}.border-left[_ngcontent-%COMP%]{border-left:1px solid #d3d3d3}ion-note[_ngcontent-%COMP%]{font-size:10px}"]}),e})()}}]);